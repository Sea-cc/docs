<template><div><h1 id="ğŸ› ï¸-webpack" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-webpack" aria-hidden="true">#</a> ğŸ› ï¸ Webpack</h1>
<h3 id="åŸºç¡€ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ç»†èŠ‚" aria-hidden="true">#</a> åŸºç¡€ç»†èŠ‚</h3>
<blockquote>
<p>ğŸŒ… é»˜è®¤çš„é…ç½®æ–‡ä»¶åç§°æ˜¯ webpack.config,js
ğŸœï¸ webpack.config.js æ˜¯ä»¥ Common JS è§„èŒƒè¿›è¡Œç»„ç»‡çš„
ğŸŒ„ ä½¿ç”¨ Webpack çš„è¿‡ç¨‹ï¼Œå¤§éƒ¨åˆ†å°±æ˜¯è·Ÿé…ç½®æ–‡ä»¶æ‰“äº¤é“çš„è¿‡ç¨‹</p>
</blockquote>
<blockquote>
<p>æ³¨æ„æ•´ä¸ªé…ç½®ä¸­æˆ‘ä»¬ä½¿ç”¨ Node å†…ç½®çš„ path æ¨¡å—ï¼Œå¹¶åœ¨å®ƒå‰é¢åŠ ä¸Š <a href="https://nodejs.org/docs/latest/api/globals.html#globals_dirname" target="_blank" rel="noopener noreferrer">__dirname<ExternalLinkIcon/></a>è¿™ä¸ªå…¨å±€å˜é‡ã€‚<strong>å¯ä»¥é˜²æ­¢ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´çš„æ–‡ä»¶è·¯å¾„é—®é¢˜</strong>ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç›¸å¯¹è·¯å¾„æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚</p>
<p>__dirnameï¼šå½“å‰æ–‡ä»¶ç»å¯¹è·¯å¾„</p>
<p>join ä¸ resolve åŒºåˆ«ï¼š</p>
<p>ğŸª‚ <code v-pre>path.join('/a', '/b'); è¾“å‡ºï¼š/a/b</code></p>
<p>â€‹ <code v-pre>path.resolve('/a', '/b'); è¾“å‡ºï¼š /b</code></p>
<p>â›µ <strong>join æ˜¯æŠŠå„ä¸ª path ç‰‡æ®µè¿æ¥åœ¨ä¸€èµ·ï¼Œ resolve æŠŠâ€˜ï¼â€™å½“æˆæ ¹ç›®å½•</strong></p>
<p>ğŸŸ resolve åœ¨ä¼ å…¥é/è·¯å¾„æ—¶ï¼Œä¼šè‡ªåŠ¨<code v-pre>åŠ ä¸Šå½“å‰ç›®å½•</code>å½¢æˆä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œè€Œ join <code v-pre>ä»…ä»…ç”¨äºè·¯å¾„æ‹¼æ¥</code></p>
<p>ğŸ›µ join ä¸ resolve çš„æ“ä½œç±»ä¼¼äº cd å‘½ä»¤</p>
</blockquote>
<blockquote>
<p>module (æ¨¡å—é…ç½®ï¼Œä¸åŒç±»å‹æ–‡ä»¶çš„é…ç½® <code v-pre>loader é…ç½®</code>)</p>
</blockquote>
<blockquote>
<p>æŒ‡å®šè§„åˆ™é…ç½®æœ‰ä¸‰ç§æ–¹å¼ï¼ŒæŒ‰ç…§åŠ è½½å…ˆåé¡ºåºï¼Œä¾æ¬¡æ˜¯ï¼š
ğŸ›°ï¸ åœ¨ package.json ä¸­çš„ stylelint å±æ€§æŒ‡å®šè§„åˆ™
ğŸš€ åœ¨ .stylelintrc ä¸­æŒ‡å®šè§„åˆ™
ğŸ¹ åœ¨ stylelint.config.js ä¸­æŒ‡å®šè§„åˆ™</p>
</blockquote>
<blockquote>
<p>é…ç½® webpack develop server åï¼Œé»˜è®¤ä¼šå°†æ‰“åŒ…çš„å†…å®¹ä¿å­˜åˆ°å†…å­˜å½“ä¸­(æé«˜æ‰“åŒ…è¯»å†™æ•°æ®æ•ˆç‡)</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">//...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	devServer</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		client</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			progress</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// åœ¨æµè§ˆå™¨ä¸­ä»¥ç™¾åˆ†æ¯”æ˜¾ç¤ºç¼–è¯‘è¿›åº¦</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			reconnect</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// å°è¯•é‡æ–°è¿æ¥å®¢æˆ·ç«¯çš„æ¬¡æ•°ã€‚ä¸º true æ—¶ï¼Œå°†æ— é™æ¬¡å°è¯•é‡æ–°è¿æ¥ã€‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		webSocketServer</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;ws&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// &#39;ws&#39; | &#39;sockjs&#39; ä¸ºå®¢æˆ·ç«¯å•ç‹¬é€‰æ‹©å½“å‰çš„ devServer ä¼ è¾“æ¨¡å¼ï¼Œæˆ–è€…æä¾›è‡ªå®šä¹‰çš„å®¢æˆ·ç«¯å®ç°ã€‚è¿™å…è®¸æŒ‡å®šæµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯ä¸ devServer çš„é€šä¿¡æ–¹å¼ã€‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åŒºåˆ†ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#åŒºåˆ†ç¯å¢ƒ" aria-hidden="true">#</a> åŒºåˆ†ç¯å¢ƒ</h3>
<h6 id="é€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†" aria-hidden="true">#</a> é€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†</h6>
<blockquote>
<p>é€šè¿‡å‘½ä»¤è¡Œè¯»å–ç¯å¢ƒå˜é‡ <code v-pre>webpack--env.production</code>ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†ä¸åŒçš„æ‰“åŒ…ç¯å¢ƒ</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">webpack</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">config</span><span style="color: var(--shiki-color-text)">.js</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)">å‡½æ•°å¼å†™æ³•</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (env</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)">argv) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">//å¼€å‘</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">config</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">mode:</span><span style="color: var(--shiki-token-string-expression)">&#39;development&#39;</span><span style="color: var(--shiki-color-text)">.</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ç”Ÿäº§</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">env</span><span style="color: var(--shiki-color-text)">.production){</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">config</span><span style="color: var(--shiki-color-text)">.mode </span><span style="color: var(--shiki-token-string-expression)">&#39;production&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// æ›´å¤šé…ç½®...</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> config</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h6 id="é€šè¿‡é…ç½®æ–‡ä»¶åŒºåˆ†" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡é…ç½®æ–‡ä»¶åŒºåˆ†" aria-hidden="true">#</a> é€šè¿‡é…ç½®æ–‡ä»¶åŒºåˆ†</h6>
<blockquote>
<p><strong><code v-pre>webpack.dev.conf.jsã€webpack.prod.conf.js</code></strong>
å‘½ä»¤æ‰§è¡Œæ‰“åŒ…æ—¶ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶ ( <code v-pre>webpack-config webpack.[dev|prod).conf.js</code> )</p>
</blockquote>
<h6 id="æŠ½å–å…¬å…±é…ç½®å¯¹ä¸åŒç¯å¢ƒçš„é…ç½®è¿›è¡Œåˆå¹¶" tabindex="-1"><a class="header-anchor" href="#æŠ½å–å…¬å…±é…ç½®å¯¹ä¸åŒç¯å¢ƒçš„é…ç½®è¿›è¡Œåˆå¹¶" aria-hidden="true">#</a> æŠ½å–å…¬å…±é…ç½®å¯¹ä¸åŒç¯å¢ƒçš„é…ç½®è¿›è¡Œåˆå¹¶</h6>
<blockquote>
<p>å£°æ˜å…¬å…±çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ <code v-pre>webpack.base.conf.js</code>ï¼Œé€šè¿‡ <code v-pre>webpack-merge</code>åŒ…ï¼Œå°†å¤šä¸ªé…ç½®åˆå¹¶ï¼›</p>
<p><code v-pre>webpack.prod.conf.js + webpack.base.conf.js</code></p>
<p><code v-pre>webpack.dev.conf.js + webpack.base.conf.js</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">merge</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;webpack-merge&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">baseWebpackConfig</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;./webpack.base.conf&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">devWebpackConfig</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">merge</span><span style="color: var(--shiki-color-text)">(baseWebpackConfig</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// ...å¼€å‘ç¯å¢ƒé…ç½®</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> devWebpackConfig;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h6 id="é€šè¿‡-defineplugin-åˆ›å»º-æ³¨å…¥-å…¨å±€å˜é‡" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡-defineplugin-åˆ›å»º-æ³¨å…¥-å…¨å±€å˜é‡" aria-hidden="true">#</a> é€šè¿‡ DefinePlugin åˆ›å»º(æ³¨å…¥)å…¨å±€å˜é‡</h6>
<blockquote>
<p><strong><code v-pre>Webpack DefinePlugin</code></strong></p>
<p>DefinePlugin</p>
<p>ğŸ§« ä¸ºé…ç½®æ³¨å…¥å…¨å±€å˜é‡</p>
<p>ğŸ›¹ å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„æ¥å£åœ°å€ä¸åŒ</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">webpack</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;webpack&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	plugins</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">webpack</span><span style="color: var(--shiki-token-function)">.Defineplugin</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// å˜é‡å€¼(value)è¦æ±‚æ˜¯ä¸€ä¸ªä»£ç ç‰‡æ®µ,ç›´æ¥èµ‹å€¼å­—ç¬¦ä¸²ç±»å‹æ—¶ï¼Œæ‰“åŒ…åå¹¶ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦		ä¸²ç±»å‹çš„å€¼ï¼Œéœ€è¦é€šè¿‡`JSON.stringify`è½¬åŒ–â›µ</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			API_BASE_URL</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">JSON</span><span style="color: var(--shiki-token-function)">.stringify</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;https://api.example.com&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		})</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// åœ¨é¡¹ç›®ä»£ç ä¸­</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">API_BASE_URL</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h3 id="è‡ªå®šä¹‰æ’ä»¶-plugin" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ’ä»¶-plugin" aria-hidden="true">#</a> è‡ªå®šä¹‰æ’ä»¶ Plugin</h3>
<blockquote>
<p>å½“ç°æœ‰çš„æ’ä»¶æ»¡è¶³ä¸äº†å®é™…å¼€å‘çš„éœ€æ±‚æ—¶å€™ï¼Œéœ€è¦è‡ªå®šä¹‰ Plugin</p>
<p>**<code v-pre>Webpack æ’ä»¶æ˜¯ä¸€ä¸ªå…·æœ‰ appy æ–¹æ³•çš„ JavaScript å¯¹è±¡</code>**apply æ–¹æ³•ä¼šè¢« webpack compiler è°ƒç”¨ï¼Œ<strong>å¹¶ä¸”åœ¨æ•´ä¸ªç¼–è¯‘ç”Ÿå‘½å‘¨æœŸéƒ½å¯ä»¥è®¿é—® compiler å¯¹è±¡ã€‚</strong></p>
<p><strong>åŸç†</strong>
é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­ä¸­æŒ‚è½½å‡½æ•°ï¼Œæ¥å®ç°åŠŸèƒ½æ‰©å±•</p>
<p>â€‹ <strong>é’©å­</strong></p>
<p>â€‹ é’©å­æ˜¯<strong>æå‰åœ¨å¯èƒ½å¢åŠ åŠŸèƒ½çš„åœ°æ–¹ï¼ŒåŸ‹å¥½(é¢„è®¾)ä¸€ä¸ªå‡½æ•°</strong></p>
</blockquote>
<blockquote>
<p><strong>å¸¸ç”¨é’©å­(æ€»å…±æœ‰ 50 ä¸ªå·¦å³é’©å­)</strong></p>
<p><img src="/img/webpack.png" alt="" loading="lazy"></p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼šemit æ˜¯ä¿®æ”¹å†…å®¹çš„æœ€åæœºä¼š(è¾“å‡ºä¹‹å‰)â›µ</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// è‡ªå®šä¹‰å®šä¹‰æ’ä»¶</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">Plugin</span><span style="color: var(--shiki-color-text)">{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">constructor</span><span style="color: var(--shiki-color-text)">(options){</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-comment)">// æ’ä»¶æ’å…¥çš„é…ç½®é€‰é¡¹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		console</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;æ’ä»¶é€‰é¡¹ï¼š&#39;</span><span style="color: var(--shiki-color-text)">ï¼Œoptions)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// å¿…é¡»è¦æœ‰applyæ–¹æ³•</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">apply</span><span style="color: var(--shiki-color-text)">(compilerï¼‰{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-comment)">// é€‰æ‹©è°ƒç”¨çš„é’©å­(å¦‚ emit)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    	compiler.hooks.emit.tap(&#39;æ’ä»¶åç§°&#39;ï¼Œ(compilation)</span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)">{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	</span><span style="color: var(--shiki-token-comment)">// é€šè¿‡ compilation(æ­¤æ¬¡æ‰“åŒ…çš„ä¸Šä¸‹æ–‡)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	console.Log(</span><span style="color: var(--shiki-token-string-expression)">&#39;webpackæ„å»ºè¿‡ç¨‹å¼€å§‹ï¼&#39;</span><span style="color: var(--shiki-color-text)">ï¼Œcompilation);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	</span><span style="color: var(--shiki-token-comment)">// é€šè¿‡ compilation.assets[æ–‡ä»¶å].source() è·å–æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	</span><span style="color: var(--shiki-token-comment)">// é€šè¿‡æ­£åˆ™ç­‰æ–¹å¼ä¿®æ”¹å†…å®¹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	</span><span style="color: var(--shiki-token-comment)">// å°†æ›¿æ¢å®Œæˆåçš„å†…å®¹å½’åŸä½</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        	compilation.assets[æ–‡ä»¶å]={</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">                source</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> æ›¿æ¢åå†…å®¹</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">                size</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">æ›¿æ¢åå†…å®¹</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        })</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<p><code v-pre>endsWith()</code> <strong>åˆ¤æ–­å­—ç¬¦ä¸²åé¢æ˜¯å¦ä»¥å‚æ•°æ˜¯ç›¸åŒçš„ç»“å°¾</strong></p>
<h3 id="è‡ªå®šä¹‰-loader" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰-loader" aria-hidden="true">#</a> è‡ªå®šä¹‰ loader</h3>
<blockquote>
<p>loader <strong><code v-pre>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ESModel æ¨¡å—(ä¸€ä¸ªå‡½æ•°)</code></strong>ï¼Œå®ƒå¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œåœ¨**<code v-pre>å‡½æ•°ä¸­å¯¹æ‰“åŒ…èµ„æºè¿›è¡Œè½¬åŒ–</code>**</p>
<p>ğŸ›¹ webpack è°ƒç”¨ loader çš„æ—¶æœºåœ¨è§¦å‘ compilation çš„ buildModule é’©å­ä¹‹å</p>
<p>ğŸ›¹ å®ƒçš„æ ¸å¿ƒæ­¥éª¤æ˜¯ä»æ–‡ä»¶åŸå§‹å†…å®¹ä¸­å–å¾—åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œä¿®å¤ JSON åºåˆ—åŒ–ç‰¹æ®Šå­—ç¬¦æ—¶çš„ bugï¼Œæ·»åŠ å¯¼å‡ºè¯­å¥ï¼Œä½¿å…¶æˆä¸º JavaScript æ¨¡å—</p>
<p>æ³¨æ„ï¼š<strong><code v-pre>åœ¨è½¬åŒ–è¿‡ç¨‹å½“ä¸­ï¼Œè¦æ±‚æœ€ç»ˆè½¬åŒ–(æœ€åä¸€ä¸ª loader)çš„å¿…é¡»ä¸º JavaScript ä»£ç å­—ç¬¦ä¸²ï¼Œå¦åˆ™æŠ¥é”™</code></strong> 'consloe.log(&quot;YYYYY&quot;)'ã€<code v-pre>'model.export=${JSON.stringify(html)}'</code></p>
<p>ä½¿ç”¨ <code v-pre>JSON.stringify()</code>åŸå› æ˜¯è¾“å‡ºå†…å®¹å¯èƒ½å­˜åœ¨å­—ç¬¦ä¸²å¼•å·ç›¸åŒå¯¼è‡´çš„ bug é”™è¯¯ï¼ŒJavaScript ä»£ç ä¸­å­—ç¬¦ä¸²å¼•å·åŒ…è£¹é—®é¢˜ &quot; &quot;&quot; &quot; âŒ &quot; '' &quot;ğŸ’¯</p>
</blockquote>
<blockquote>
<p>ES Modules æ˜¯ 2015 å¹´æ¨å‡ºçš„ï¼Œè¯­è¨€å±‚é¢çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä¸è¿è¡Œç¯å¢ƒæ— å…³ï¼ŒæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¸­éƒ½èƒ½ä½¿ç”¨ã€‚</p>
<p>åœ¨ html ä¸­ï¼Œ<strong><code v-pre>é€šè¿‡ç»™ script æ·»åŠ  type = module çš„å±æ€§ï¼Œå°±å¯ä»¥ç”¨ ES Module çš„æ ‡å‡†æ‰§è¡Œå…¶ä¸­çš„ JS ä»£ç </code></strong></p>
<p>æ¯ä¸ª ES Module éƒ½æ˜¯è¿è¡Œåœ¨å•ç‹¬çš„ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œä¸ä¼šæœ‰å…¨å±€ä½œç”¨åŸŸæ±¡æŸ“çš„é—®é¢˜ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ›µ <code v-pre>loader-utils</code> ä¸ <code v-pre>schema-utils</code>ï¼Œå¯ä»¥ä½¿è·å–åŠéªŒè¯ä¼ é€’ç»™ loader çš„å‚æ•°é…ç½®é¡¹çš„å·¥ä½œç®€å•åŒ–</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">getoptions</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;loader-utils&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">validate</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;schema-utils&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">marked</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;marked&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è‡ªå®šä¹‰loaderï¼Œsourceï¼šè¦å¤„ç†çš„å†…å®¹</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(source){</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// è·å–loaderé…ç½®é€‰é¡¹ğŸª‚ æ³¨æ„ loader å‡½æ•°ä¸èƒ½å†™æˆã€ç®­å¤´å‡½æ•°(this æŒ‡å‘é—®é¢˜)ã€‘</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">options</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getoptions</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// å¯¹è¾“å…¥å†…å®¹è¿›è¡Œå¤„ç†ğŸ¹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">html</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">marked</span><span style="color: var(--shiki-color-text)">(source)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">//  é€šè¿‡ this.callback å¯ä»¥è¿”å›é™¤å†…å®¹ä»¥å¤–çš„å…¶ä»–ä¿¡æ¯(å¦‚ sourcemap)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ã€è¿”è¿˜å§‹ä¸‹ä¸€ä¸ª loader å¤„ç†ã€‘ğŸœï¸ è½¬æ¢å†…å®¹åï¼Œå¯ä»¥é€šè¿‡ return æˆ–è°ƒç”¨ this.callback è¿”å›ç»“æœ</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> html</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">ä½¿ç”¨ï¼š</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    test</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-token-string-expression)">/\.md</span><span style="color: var(--shiki-token-keyword)">$</span><span style="color: var(--shiki-token-string-expression)">/</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// åŒ¹é…</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    use</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-token-string-expression)">&#39;loader åç§° || å¿˜è®°æ–‡ä»¶è·¯å¾„&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code v-pre>é€šè¿‡ this.async å¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ç»“æœ</code></strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> (content</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> map</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> meta) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">callback</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-token-function)">.async</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">someAsyncOperation</span><span style="color: var(--shiki-color-text)">(content</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (err</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> result</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> sourceMaps</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> meta) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (err) </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(err);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> result</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> sourceMaps</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> meta);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	});</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤éè®¡ç®—å¾ˆå°ï¼Œå¦åˆ™å¯¹äº Node.js è¿™ç§å•çº¿ç¨‹ç¯å¢ƒï¼Œå°½å¯èƒ½ä½¿ç”¨å¼‚æ­¥ loaderã€‚</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å› ä¸º babel çš„ preset-env ä¼šå°† ES6 module è½¬åŒ–ä¸º Common.js çš„å½¢å¼ï¼Œä¼šå¯¼è‡´ webpack ä¸­ tree-shaking ç‰¹æ€§å¤±æ•ˆï¼Œæ‰€æœ‰å°† modules ç½®ä¸º false,äº¤ç»™webpack è‡ªèº«å¤„ç†</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">modules</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">false</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-comment)">// é€šå¸¸ä¼šåœ¨é…ç½® loader å°† modules ç½®ä¸º false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>loader-utils ä¸»è¦æœ‰ä»¥ä¸‹å·¥å…·æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code v-pre>parseQuery</code>ï¼šè§£æ loader çš„ query å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p>
</li>
<li>
<p><code v-pre>stringifyRequest</code>ï¼šå°†è¯·æ±‚çš„èµ„æºè½¬æ¢ä¸ºå¯ä»¥åœ¨ loader ç”Ÿæˆçš„ä»£ç ä¸­ require æˆ– import ä½¿ç”¨çš„ç›¸å¯¹è·¯å¾„å­—ç¬¦ä¸²ï¼ŒåŒæ—¶é¿å…ç»å¯¹è·¯å¾„å¯¼è‡´é‡æ–°è®¡ç®— hash å€¼</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">loaderUtils</span><span style="color: var(--shiki-token-function)">.stringifyRequest</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./test.js&#39;</span><span style="color: var(--shiki-color-text)">); </span><span style="color: var(--shiki-token-comment)">// &quot;\&quot;./test.js\&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p><code v-pre>urlToRequest</code>ï¼šå°†è¯·æ±‚çš„èµ„æºè·¯å¾„è½¬æ¢æˆ webpack å¯ä»¥å¤„ç†çš„å½¢å¼</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">url</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;~path/to/module.js&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">request</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">loaderUtils</span><span style="color: var(--shiki-token-function)">.urlToRequest</span><span style="color: var(--shiki-color-text)">(url); </span><span style="color: var(--shiki-token-comment)">// &quot;path/to/module.js&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><code v-pre>interpolateName</code>ï¼šå¯¹æ–‡ä»¶åæ¨¡æ¿è¿›è¡Œæ’å€¼ã€‚</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// loaderContext.resourcePath = &quot;/absolute/path/to/app/js/hzfe.js&quot;</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">loaderUtils</span><span style="color: var(--shiki-token-function)">.interpolateName</span><span style="color: var(--shiki-color-text)">(loaderContext</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;js/[hash].script.[ext]&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { content</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// =&gt; js/9473fdd0d880a43c21b7778d34872157.script.js</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><code v-pre>getHashDigest</code>ï¼šè·å–æ–‡ä»¶å†…å®¹çš„ hash å€¼ã€‚</p>
</li>
<li></li>
</ul>
<p>åœ¨ç¼–å†™ loader çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ loaderContext å¯¹è±¡æ¥è·å– loader çš„ç›¸å…³ä¿¡æ¯å’Œè¿›è¡Œä¸€äº›é«˜çº§çš„æ“ä½œï¼Œå¸¸è§çš„å±æ€§å’Œæ–¹æ³•æœ‰ï¼š</p>
<ul>
<li><code v-pre>this.addDependency</code>ï¼šåŠ å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œä½œä¸º loader äº§ç”Ÿçš„ç»“æœçš„ä¾èµ–ï¼Œä½¿å…¶åœ¨æœ‰ä»»ä½•å˜åŒ–æ—¶å¯ä»¥è¢«ç›‘å¬åˆ°ï¼Œä»è€Œè§¦å‘é‡æ–°ç¼–è¯‘</li>
<li><code v-pre>this.async</code>ï¼šå‘Šè¯‰ loader-runner è¿™ä¸ª loader å°†ä¼šå¼‚æ­¥çš„æ‰§è¡Œå›è°ƒ</li>
<li><code v-pre>this.cacheable</code>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå°† loader çš„å¤„ç†ç»“æœæ ‡è®°ä¸ºå¯ç¼“å­˜ã€‚ä¼ å…¥ false å¯ä»¥å…³é—­ loader å¤„ç†ç»“æœçš„ç¼“å­˜èƒ½åŠ›</li>
<li><code v-pre>this.fs</code>ï¼šç”¨äºè®¿é—® compilation çš„ inputFileSystem å±æ€§</li>
<li><code v-pre>this.getOptions</code>ï¼šæå– loader çš„é…ç½®é€‰é¡¹ã€‚ä» webpack 5 å¼€å§‹ï¼Œå¯ä»¥è·å–åˆ° loader ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨äºæ›¿ä»£ <code v-pre>loader-utils</code> ä¸­çš„ getOptions æ–¹æ³•</li>
<li><code v-pre>this.mode</code>ï¼š webpack çš„è¿è¡Œæ¨¡å¼ï¼Œå¯ä»¥æ˜¯ â€œdevelopmentâ€ æˆ– â€œproductionâ€</li>
<li><code v-pre>this.query</code>ï¼šå¦‚æœ loader é…ç½®äº† options å¯¹è±¡ï¼Œåˆ™æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœ loader æ²¡æœ‰ optionsï¼Œè€Œæ˜¯ä»¥ query å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œquery åˆ™æ˜¯ä¸€ä¸ªä»¥ <code v-pre>?</code> å¼€å¤´çš„å­—ç¬¦ä¸²</li>
</ul>
</blockquote>
</div></template>
