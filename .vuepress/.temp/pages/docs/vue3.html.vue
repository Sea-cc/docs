<template><div><h1 id="ğŸ“–-vue-3" tabindex="-1"><a class="header-anchor" href="#ğŸ“–-vue-3" aria-hidden="true">#</a> ğŸ“– Vue 3</h1>
<blockquote>
<p>setup<code v-pre>æ˜¯æ‰€æœ‰</code>Composition API<code v-pre>çš„å®¹å™¨ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„æ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨</code>setup<code v-pre>ä¸­ï¼Œå®ƒä¼šåœ¨</code>beforeCreate<code v-pre>ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œæ³¨æ„ï¼š</code>V3<code v-pre>é‡Œ</code>this<code v-pre>ä¸å†æ˜¯æŒ‡å‘</code>Vue<code v-pre>å®ä¾‹ï¼Œè®¿é—®</code>this<code v-pre>ä¼šæ˜¯</code>undefined</p>
<p><code v-pre>VUE2</code>é…ç½®ã€<code v-pre>data</code>ã€<code v-pre>methos</code>ã€<code v-pre>computed</code>...ã€‘ä¸­å¯ä»¥è®¿é—®åˆ°<code v-pre>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•
ä½†åœ¨<code v-pre>setup</code>ä¸­ä¸èƒ½è®¿é—®åˆ°<code v-pre>VUE2</code>é…ç½®ã€<code v-pre>data</code>ã€<code v-pre>methos</code>ã€<code v-pre>computed</code>...ã€‘
è‹¥å­˜åœ¨é‡å, <code v-pre>setup</code>ä¼˜å…ˆï¼Œ<strong>ç”Ÿå‘½å‘¨æœŸå…¨éƒ½å†™åœ¨<code v-pre>setup</code>ä¸­</strong></p>
</blockquote>
<h3 id="setup-çš„å‚æ•°" tabindex="-1"><a class="header-anchor" href="#setup-çš„å‚æ•°" aria-hidden="true">#</a> setup çš„å‚æ•°</h3>
<ul>
<li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œ<strong>ä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§</strong></li>
<li>contextï¼š<strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>
<ul>
<li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨<code v-pre>props</code>é…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº<code v-pre>this.$attrs</code></li>
<li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº<code v-pre>this.$slots</code></li>
<li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº<code v-pre>this.$emit</code></li>
</ul>
</li>
</ul>
<p>å‰è¨€ï¼š<code v-pre>&lt;script setup&gt;</code> æ˜¯ä¸€ç§<strong>ç¼–è¯‘æ—¶çš„è¯­æ³•ç³–</strong>ï¼Œåœ¨æ–‡ä»¶å†…ä½¿ç”¨ Compostion API æ—¶æå¤§æé«˜å·¥ä½œæ•ˆç‡</p>
<p>Compostion API å†™æ³•(<strong>16 è¡Œä»£ç </strong>)</p>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> Foo </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./Foo.vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	components</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		Foo</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">increment</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)">.value</span><span style="color: var(--shiki-token-keyword)">++</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { count</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> increment };</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	&lt;</span><span style="color: var(--shiki-token-constant)">Foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">@</span><span style="color: var(--shiki-token-function)">click</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)">&quot;</span><span style="color: var(--shiki-color-text)">increment</span><span style="color: var(--shiki-color-text)">&quot;</span><span style="color: var(--shiki-color-text)">&gt;{{ count }}&lt;/</span><span style="color: var(--shiki-token-constant)">Foo</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Compostion API + setup å†™æ³•(<strong>9 è¡Œä»£ç </strong>)</p>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ref } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> Foo </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./Foo.vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">increment</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)">.value</span><span style="color: var(--shiki-token-keyword)">++</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	&lt;</span><span style="color: var(--shiki-token-constant)">Foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">@</span><span style="color: var(--shiki-token-function)">click</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)">&quot;</span><span style="color: var(--shiki-color-text)">increment</span><span style="color: var(--shiki-color-text)">&quot;</span><span style="color: var(--shiki-color-text)">&gt;{{ count }}&lt;/</span><span style="color: var(--shiki-token-constant)">Foo</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="v-bind" tabindex="-1"><a class="header-anchor" href="#v-bind" aria-hidden="true">#</a> v-bind</h3>
<p>åœ¨ VUE æ–‡ä»¶æ ‡ç­¾å¯ç”¨ç»„ä»¶çŠ¶æ€å¯åŠ¨çš„åŠ¨æ€ CSS å€¼</p>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ref } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;#FFFFFF&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">style</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">.html</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)">color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">v-bind(count</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">style</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="node-api-æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#node-api-æ”¯æŒ" aria-hidden="true">#</a> Node API æ”¯æŒ</h3>
<p>é»˜è®¤<code v-pre>ts</code>ä¸æ”¯æŒ node api çš„ä½¿ç”¨ï¼Œå¦‚<code v-pre>import path from 'path'</code>,ç¼–è¾‘å™¨æç¤ºï¼šæ‰¾ä¸åˆ°è¯¥æ¨¡å—â€˜pathâ€™</p>
<p>è§£å†³æ–¹æ¡ˆï¼š<code v-pre>npm install @types/node -D</code></p>
<h3 id="ç»„ä»¶ä¼ å‚" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶ä¼ å‚" aria-hidden="true">#</a> ç»„ä»¶ä¼ å‚</h3>
<p>æ³¨æ„ï¼šåœ¨ setup è¯­æ³•ç³–ä¸­ï¼Œ<code v-pre>defineProps</code> <code v-pre>defineEmits</code> <code v-pre>defineExpose</code>éƒ½ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å³å¯</p>
<h5 id="prop-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-ç¼–è¯‘å™¨å®" tabindex="-1"><a class="header-anchor" href="#prop-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-ç¼–è¯‘å™¨å®" aria-hidden="true">#</a> prop åœ¨ setup è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨(<strong>ç¼–è¯‘å™¨å®</strong>)</h5>
<p>æ³¨æ„ï¼šæ‰€æœ‰å£°æ˜äº†çš„ propï¼Œä¸ç®¡çˆ¶ç»„ä»¶æ˜¯å¦å‘å…¶ä¼ é€’ï¼Œéƒ½å°†å‡ºç°åœ¨ <code v-pre>props</code> å¯¹è±¡ä¸­ã€‚å…¶ä¸­æœªè¢«ä¼ å…¥çš„å¯é€‰çš„ prop çš„å€¼ä¼šæ˜¯ <code v-pre>undefined</code>ã€‚</p>
<p>ä¼ å…¥åˆ° <code v-pre>defineProps</code> çš„é€‰é¡¹ä¼šä» <code v-pre>setup </code>ä¸­æå‡åˆ°æ¨¡å—çš„èŒƒå›´ã€‚å› æ­¤ï¼Œ<strong>ä¼ å…¥çš„é€‰é¡¹ä¸èƒ½å¼•ç”¨åœ¨ <code v-pre>setup</code> èŒƒå›´ä¸­å£°æ˜çš„å±€éƒ¨å˜é‡</strong>ã€‚è¿™æ ·åšä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯ã€‚ä½†æ˜¯ï¼Œ<strong>å®ƒå¯ä»¥å¼•ç”¨å¯¼å…¥çš„ç»‘å®šï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿåœ¨æ¨¡å—èŒƒå›´å†…</strong></p>
<p><strong>å¦‚æœéœ€è¦æ£€æµ‹ä¸€ä¸ªå¯é€‰çš„ prop æ˜¯å¦æœªè¢«ä¼ é€’ï¼Œä½ å¯ä»¥å°†å…¶é»˜è®¤å€¼è®¾ç½®ä¸ºä¸€ä¸ª Symbol</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// æ£€æµ‹æ˜¯å¦æœªè¢«ä¼ é€’</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">isAbsent</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Symbol</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-comment)">// **</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">porps</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    command</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        type</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">String</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        default</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> isAbsent </span><span style="color: var(--shiki-token-comment)">// **</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// åˆ¤æ–­æ˜¯å¦ä¼ å…¥</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)">.command </span><span style="color: var(--shiki-token-keyword)">===</span><span style="color: var(--shiki-color-text)"> isAbsent) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ts æ³›å‹å‡½æ•° defineProps(ç¼ºå°‘é»˜è®¤å€¼default)</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">porps</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">&lt;{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        command</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">String</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }&gt;()</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è§£å†³ç¼ºå°‘é»˜è®¤å€¼ default æ–¹æ¡ˆ</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">porps</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">withDefault</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">&lt;{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">       		command</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">String</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    	}&gt;()</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    	{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            command</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-string-expression)">&#39;VUE_SETUP&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// å¯¹è±¡ç±»å‹çš„é»˜è®¤å€¼</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  propE</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    type</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Object</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// å¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤å€¼</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è¿”å›ã€‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// è¯¥å‡½æ•°æ¥æ”¶ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„åŸå§‹ prop ä½œä¸ºå‚æ•°ã€‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)">(rawProps) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { message</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)"> }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// è‡ªå®šä¹‰ç±»å‹æ ¡éªŒå‡½æ•°</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  propF</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">validator</span><span style="color: var(--shiki-color-text)">(value) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// The value must match one of these strings</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;success&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;warning&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;danger&#39;</span><span style="color: var(--shiki-color-text)">]</span><span style="color: var(--shiki-token-function)">.includes</span><span style="color: var(--shiki-color-text)">(value)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// å‡½æ•°ç±»å‹çš„é»˜è®¤å€¼</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  propG</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    type</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Function</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ä¸åƒå¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ã€‚è¿™ä¼šæ˜¯ä¸€ä¸ªç”¨æ¥ä½œä¸ºé»˜è®¤å€¼çš„å‡½æ•°</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;Default function&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>æ¥å£æˆ–å¯¹è±¡å­—é¢ç±»å‹å¯ä»¥åŒ…å«ä»å…¶ä»–æ–‡ä»¶å¯¼å…¥çš„ç±»å‹å¼•ç”¨ï¼Œä½†æ˜¯ï¼Œä¼ é€’ç»™ <code v-pre>defineProps</code> çš„æ³›å‹å‚æ•°æœ¬èº«<strong>ä¸èƒ½</strong>æ˜¯ä¸€ä¸ªå¯¼å…¥çš„ç±»å‹</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { Props } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./other-file&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ä¸æ”¯æŒï¼</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-function)">Props</span><span style="color: var(--shiki-color-text)">&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸º Vue ç»„ä»¶æ˜¯å•ç‹¬ç¼–è¯‘çš„ï¼Œç¼–è¯‘å™¨ç›®å‰ä¸ä¼šæŠ“å–å¯¼å…¥çš„æ–‡ä»¶ä»¥åˆ†ææºç±»å‹ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è§£å†³è¿™ä¸ªé™åˆ¶ã€‚</p>
<ol>
<li>
<p><strong>prop è¢«ç”¨äºä¼ å…¥åˆå§‹å€¼ï¼›è€Œå­ç»„ä»¶æƒ³åœ¨ä¹‹åå°†å…¶ä½œä¸ºä¸€ä¸ªå±€éƒ¨æ•°æ®å±æ€§</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æ˜¯æ–°å®šä¹‰ä¸€ä¸ªå±€éƒ¨æ•°æ®å±æ€§ï¼Œä» props ä¸Šè·å–åˆå§‹å€¼å³å¯ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">([</span><span style="color: var(--shiki-token-string-expression)">&#39;initialCounter&#39;</span><span style="color: var(--shiki-color-text)">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è®¡æ•°å™¨åªæ˜¯å°† props.initialCounter ä½œä¸ºåˆå§‹å€¼</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// åƒä¸‹é¢è¿™æ ·åšå°±ä½¿ prop å’Œåç»­æ›´æ–°æ— å…³äº†</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">counter</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)">.initialCounter);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><strong>éœ€è¦å¯¹ä¼ å…¥çš„ prop å€¼åšè¿›ä¸€æ­¥çš„è½¬æ¢</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œ<code v-pre>æœ€å¥½æ˜¯åŸºäºè¯¥ prop å€¼å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">defineProps</span><span style="color: var(--shiki-color-text)">([</span><span style="color: var(--shiki-token-string-expression)">&#39;size&#39;</span><span style="color: var(--shiki-color-text)">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è¯¥ prop å˜æ›´æ—¶è®¡ç®—å±æ€§ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°.ğŸ“¦</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">normalizedSize</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">computed</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">size</span><span style="color: var(--shiki-token-function)">.trim</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-function)">.toLowerCase</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<h5 id="emit-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-ç¼–è¯‘å™¨å®" tabindex="-1"><a class="header-anchor" href="#emit-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-ç¼–è¯‘å™¨å®" aria-hidden="true">#</a> emit åœ¨ setup è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨(<strong>ç¼–è¯‘å™¨å®</strong>)</h5>
<p>æ³¨æ„ï¼šdefineEmits å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥æ˜¯å°é©¼å³°æˆ–å…¨éƒ¨å°å†™ï¼Œä½†æ˜¯<strong>åœ¨ç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶å®šä¹‰æ—¶ï¼Œåº”å…¨éƒ¨å°å†™ï¼Œå¦‚<code v-pre>@set-name</code></strong></p>
<p>åœ¨ç»„ä»¶çš„æ¨¡æ¿è¡¨è¾¾å¼ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨ <code v-pre>$emit</code> æ–¹æ³•è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ ä¾‹å¦‚ï¼š<code v-pre>&lt;button @click=&quot;$emit('someEvent')&quot;&gt;click me&lt;/button&gt;</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å®šä¹‰</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">emits</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">defineEmits</span><span style="color: var(--shiki-color-text)">([</span><span style="color: var(--shiki-token-string-expression)">&#39;switchForm&#39;</span><span style="color: var(--shiki-color-text)">])</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è§¦å‘ emits(&#39;äº‹ä»¶å&#39;,å‚æ•°)</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">emits</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;switchForm&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ts ç±»å‹å£°æ˜</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">emits</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> defineEmits</span><span style="color: var(--shiki-token-keyword)">&lt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      		{	</span><span style="color: var(--shiki-token-comment)">// e:äº‹ä»¶å,arg:å‚æ•°</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">                (e</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-string-expression)">&#39;switchForm&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)">arg</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-constant)">boolean</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-constant)">void</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      &gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>ç»„ä»¶è§¦å‘çš„äº‹ä»¶<strong>æ²¡æœ‰å†’æ³¡æœºåˆ¶</strong>ã€‚ä½ åªèƒ½ç›‘å¬ç›´æ¥å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ã€‚å¹³çº§ç»„ä»¶æˆ–æ˜¯è·¨è¶Šå¤šå±‚åµŒå¥—çš„ç»„ä»¶é—´é€šä¿¡ï¼Œåº”ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„äº‹ä»¶æ€»çº¿ï¼Œæˆ–æ˜¯ä½¿ç”¨ä¸€ä¸ªå…¨å±€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ</p>
<p>å¦‚æœä¸€ä¸ªåŸç”Ÿäº‹ä»¶çš„åå­— (ä¾‹å¦‚ <code v-pre>click</code>) è¢«å®šä¹‰åœ¨ <code v-pre>emits</code> é€‰é¡¹ä¸­ï¼Œåˆ™ç›‘å¬å™¨åªä¼šç›‘å¬ç»„ä»¶è§¦å‘çš„ <code v-pre>click</code> äº‹ä»¶è€Œä¸ä¼šå†å“åº”åŸç”Ÿçš„ <code v-pre>click</code> äº‹ä»¶ã€‚</p>
</blockquote>
<p>è¿™ä¸ª <code v-pre>emits</code> é€‰é¡¹è¿˜æ”¯æŒå¯¹è±¡è¯­æ³•ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹è§¦å‘äº‹ä»¶çš„å‚æ•°è¿›è¡ŒéªŒè¯ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">const emit = defineEmits({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">submit</span><span style="color: var(--shiki-color-text)">(payload) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// é€šè¿‡è¿”å›å€¼ä¸º `true` è¿˜æ˜¯ä¸º `false` æ¥åˆ¤æ–­</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// éªŒè¯æ˜¯å¦é€šè¿‡</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="useslots-and-useattrs-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-no-ç¼–è¯‘å™¨å®" tabindex="-1"><a class="header-anchor" href="#useslots-and-useattrs-åœ¨-setup-è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨-no-ç¼–è¯‘å™¨å®" aria-hidden="true">#</a> useSlots and useAttrs åœ¨ setup è¯­æ³•ç³–ä¸­çš„ä½¿ç”¨(<strong>no ç¼–è¯‘å™¨å®</strong>)</h3>
<p>useSlots and prop ç›¸åŒç‚¹ï¼š1ã€éƒ½æ˜¯å‘ç”Ÿåœ¨å­˜åœ¨äºçˆ¶å­ç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼›2ã€éƒ½æ˜¯ä¸ºåº”å¯¹çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„åœºåˆ</p>
<p>åŒºåˆ«ä¸€ï¼š</p>
<p>prop è®¾è®¡æ€æƒ³æ˜¯ä¼ é€’<strong>çŠ¶æ€æ•°æ®</strong></p>
<p>slot è®¾è®¡æ€æƒ³æ˜¯ä¼ é€’<strong>DOM èŠ‚ç‚¹</strong></p>
<p>åŒºåˆ«äºŒï¼š</p>
<p>çˆ¶ç»„ä»¶åœ¨è°ƒç”¨å­ç»„ä»¶æ—¶ï¼Œå£°æ˜å¹¶èµ‹å€¼ä¼ é€’åˆ°å­ç»„ä»¶çš„ porp åˆ—è¡¨ä¸­ï¼Œå­ç»„ä»¶<strong>æ¥å—</strong>å¹¶ä½¿ç”¨ï¼Œä½†æ˜¯<strong>ä¸€æ—¦ä¼ é€’è¿‡æ¥ä½œç”¨åŸŸå°±å‘ç”Ÿäº†å˜åŒ–</strong>ï¼›</p>
<p>å­ç»„ä»¶è™½ç„¶ä¸ºè°ƒç”¨è€…é¢„ç•™ slotï¼Œä½†æ˜¯ <strong>slot çš„ä½œç”¨åŸŸä¾ç„¶å±äºçˆ¶ç»„ä»¶ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®åˆ°çˆ¶ç»„ä»¶å†…çš„æ‰€æœ‰çŠ¶æ€</strong></p>
<p>æ’æ§½å†…å®¹å¯ä»¥è®¿é—®åˆ°çˆ¶ç»„ä»¶çš„æ•°æ®ä½œç”¨åŸŸï¼Œå› ä¸ºæ’æ§½å†…å®¹æœ¬èº«æ˜¯åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­å®šä¹‰çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;{{ message }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">// è®¿é—®çˆ¶ç»„ä»¶çš„å“åº”å¼æ•°æ®</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">FancyButton</span><span style="color: var(--shiki-color-text)">&gt;{{ message }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">FancyButton</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šslot æ’æ§½åªèƒ½åœ¨<code v-pre>template</code>ä¸­ä½¿ç”¨ï¼Œ<code v-pre>v-slot='name'</code> or <code v-pre>#name</code></p>
<h6 id="useslots" tabindex="-1"><a class="header-anchor" href="#useslots" aria-hidden="true">#</a> useSlots</h6>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { useSlots } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">slots</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useSlots</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">consolve</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">slots</span><span style="color: var(--shiki-color-text)">.name </span><span style="color: var(--shiki-token-keyword)">&amp;&amp;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">slots</span><span style="color: var(--shiki-token-function)">.name</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="useattrs-è·å–æœªæ¥å—çš„-å±æ€§-prop-ä»¥åŠäº‹ä»¶-event" tabindex="-1"><a class="header-anchor" href="#useattrs-è·å–æœªæ¥å—çš„-å±æ€§-prop-ä»¥åŠäº‹ä»¶-event" aria-hidden="true">#</a> useAttrs (è·å–æœªæ¥å—çš„ å±æ€§ prop ä»¥åŠäº‹ä»¶ event)</h6>
<p>æœªæ¥å—ï¼šæ²¡æœ‰è¢« prop æ¥å—çš„å±æ€§ä»¥åŠäº‹ä»¶ event</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { useAttrs } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">attrs</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useAttrs</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">consolve</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">slots</span><span style="color: var(--shiki-color-text)">.name </span><span style="color: var(--shiki-token-keyword)">&amp;&amp;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">slots</span><span style="color: var(--shiki-token-function)">.name</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="defineexpose" tabindex="-1"><a class="header-anchor" href="#defineexpose" aria-hidden="true">#</a> defineExpose</h3>
<p><strong>çˆ¶ç»„ä»¶æ˜¯æ— æ³•ä»å­ç»„ä»¶çš„å®ä¾‹ä¸­è·å–å…¶å±æ€§ or æ–¹æ³•</strong>ï¼Œè§£å†³æ–¹æ¡ˆï¼šå­ç»„ä»¶ä½¿ç”¨<code v-pre>defineExpose</code>å¯¹å¤–æš´éœ²è‡ªèº«çš„å±æ€§ or æ–¹æ³•</p>
<p>æ¨¡æ¿å¼•ç”¨ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ä¸€ä¸ªå­ç»„ä»¶ä¸Šã€‚è¿™ç§æƒ…å†µä¸‹å¼•ç”¨ä¸­è·å¾—çš„å€¼çš„æ˜¯ç»„ä»¶å®ä¾‹ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> onMounted } from &#39;vue&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import Child from &#39;./Child.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">const child = ref(null)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">onMounted(() =&gt; {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// child.value æ˜¯ &lt;Child /&gt; ç»„ä»¶çš„å®ä¾‹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-constant)">Child</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;child&quot;</span><span style="color: var(--shiki-color-text)"> /&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å¦‚æœä¸€ä¸ªå­ç»„ä»¶ä½¿ç”¨çš„æ˜¯<strong>é€‰é¡¹å¼ API æˆ–æ²¡æœ‰ä½¿ç”¨ <code v-pre>&lt;script setup&gt;**</code>ï¼Œè¢«å¼•ç”¨çš„ç»„ä»¶å®ä¾‹å’Œè¯¥å­ç»„ä»¶çš„ <code v-pre>this</code> å®Œå…¨ä¸€è‡´ï¼Œè¿™æ„å‘³ç€çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„æ¯ä¸€ä¸ªå±æ€§å’Œæ–¹æ³•éƒ½æœ‰</strong>å®Œå…¨çš„è®¿é—®æƒ**ã€‚è¿™ä½¿å¾—åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´åˆ›å»ºç´§å¯†è€¦åˆçš„å®ç°ç»†èŠ‚å˜å¾—å¾ˆå®¹æ˜“ï¼Œå½“ç„¶ä¹Ÿå› æ­¤ï¼Œåº”è¯¥åªåœ¨ç»å¯¹éœ€è¦æ—¶æ‰ä½¿ç”¨ç»„ä»¶å¼•ç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ <strong>åº”è¯¥é¦–å…ˆä½¿ç”¨æ ‡å‡†çš„ props å’Œ emit æ¥å£æ¥å®ç°çˆ¶å­ç»„ä»¶äº¤äº’ã€‚</strong></p>
</blockquote>
<p>æœ‰ä¸€ä¸ªä¾‹å¤–çš„æƒ…å†µï¼Œä½¿ç”¨äº† <code v-pre>&lt;script setup&gt;</code> çš„ç»„ä»¶æ˜¯<strong>é»˜è®¤ç§æœ‰</strong>çš„ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶æ— æ³•è®¿é—®åˆ°ä¸€ä¸ªä½¿ç”¨äº† <code v-pre>&lt;script setup&gt;</code> çš„å­ç»„ä»¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œé™¤éå­ç»„ä»¶åœ¨å…¶ä¸­é€šè¿‡ <code v-pre>defineExpose</code> å®æ˜¾å¼æš´éœ²ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import {ref} from &#39;vue&#39; const a = 1 const b = ref(2) defineExpose({(a</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> b)})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“çˆ¶ç»„ä»¶é€šè¿‡æ¨¡æ¿å¼•ç”¨è·å–åˆ°äº†è¯¥ç»„ä»¶çš„å®ä¾‹æ—¶ï¼Œå¾—åˆ°çš„å®ä¾‹ç±»å‹ä¸º <code v-pre>{ a: number, b: number }</code> (ref éƒ½ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œå’Œä¸€èˆ¬çš„å®ä¾‹ä¸€æ ·)ã€‚</p>
<p>å­ç»„ä»¶ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">defineExpose</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	name</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	handle</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çˆ¶ç»„ä»¶</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">childInstance</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">&lt;{ name</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-function)">handle</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">void</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">|</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">&gt;(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">el-form-item</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;childInstance&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-constant)">el-form-item</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// è¿”å› Ref å¯¹è±¡(éœ€è¦.value)ã€ä¸æ¨èç›´æ¥æ“ä½œchildInstanceçŠ¶æ€ã€‘</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">childInstance</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-token-function)">?.handle</span><span style="color: var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">childInstance</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-color-text)">?.name</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ref-dom-å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ref-dom-å®ä¾‹" aria-hidden="true">#</a> ref DOM å®ä¾‹</h4>
<p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œæ¯å½“ç‚¹å‡»è¿™äº›æŒ‰é’®æ—¶ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½ç»´æŠ¤ç€è‡ªå·±çš„çŠ¶æ€ï¼Œæ˜¯ä¸åŒçš„ <code v-pre>count</code>ã€‚è¿™æ˜¯å› ä¸ºæ¯å½“ä½ ä½¿ç”¨ä¸€ä¸ªç»„ä»¶ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<strong>å®ä¾‹</strong>ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨<code v-pre>InstanceType</code>å¯¹å£°æ˜çš„å­ç»„ä»¶å®ä¾‹è¿›è¡Œç±»å‹æ³¨è§£</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> childInstance </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./childInstance.vue&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">childInstance</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-function)">InstanceType</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-keyword)">typeof</span><span style="color: var(--shiki-color-text)"> childInstance&gt;&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†è·å– <code v-pre>childInstance</code> çš„ç±»å‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€šè¿‡ <code v-pre>typeof</code> å¾—åˆ°å…¶ç±»å‹ï¼Œå†ä½¿ç”¨ TypeScript å†…ç½®çš„ <code v-pre>InstanceType</code> å·¥å…·ç±»å‹æ¥è·å–å…¶å®ä¾‹ç±»å‹</p>
<p><code v-pre>InstanceType</code>å¯ä»¥ä»æŸä¸ª<code v-pre>ç±»å‹å¦‚(typeof childInstance)</code>ä¸­<strong>è·å–åˆ°ä¸€ä¸ªå®ä¾‹çš„æ„é€ å‡½æ•°</strong>ï¼ˆæˆ–è€…è¯´è·å–ä¸€ä¸ªæ‹¥æœ‰æ„é€ å‡½æ•°çš„å®ä¾‹çš„æ„é€ å‡½æ•°ï¼‰<strong>ç±»å‹</strong></p>
<p>æ³¨æ„ï¼šå¯¼å…¥çš„ç»„ä»¶<code v-pre>childInstance</code>å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ç»„ä»¶çš„æè¿°å¯¹è±¡</strong>ï¼ˆéœ€è¦æ ¹æ®å­ç»„ä»¶çš„æè¿°å¯¹è±¡åˆ›å»ºå‡ºæ¥ä¸€ä¸ªçœŸæ­£çš„ç»„ä»¶å®ä¾‹ï¼‰ï¼Œ</p>
<p>å¦‚<code v-pre>InstanceType&lt;typeof childInstance&gt;</code></p>
<p><code v-pre>InstanceType&lt;typeof childInstance&gt;</code>çº¦ç­‰åŒäºå¯¼å…¥çš„æè¿°å¯¹è±¡<code v-pre>childInstance</code> (import childInstance from './childInstance.vue')</p>
<blockquote>
<p><code v-pre>ref</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ attributeï¼Œå’Œ <code v-pre>v-for</code> ç« èŠ‚ä¸­æåˆ°çš„ <code v-pre>key</code> ç±»ä¼¼ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªç‰¹å®šçš„ DOM å…ƒç´ æˆ–å­ç»„ä»¶å®ä¾‹è¢«æŒ‚è½½åï¼Œè·å¾—å¯¹å®ƒçš„ç›´æ¥å¼•ç”¨ã€‚è¿™å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚è¯´åœ¨ç»„ä»¶æŒ‚è½½æ—¶å°†ç„¦ç‚¹è®¾ç½®åˆ°ä¸€ä¸ª input å…ƒç´ ä¸Šï¼Œæˆ–åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šåˆå§‹åŒ–ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p><strong>æ³¨æ„ï¼šæ˜¯ DOM å…ƒç´ æˆ–å­ç»„ä»¶å®ä¾‹è¢«æŒ‚è½½åï¼Œè·å¾—å¯¹å®ƒçš„ç›´æ¥å¼•ç”¨ã€‚</strong></p>
</blockquote>
<h2 id="v-for-ä¸­çš„æ¨¡æ¿å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#v-for-ä¸­çš„æ¨¡æ¿å¼•ç”¨" aria-hidden="true">#</a> <code v-pre>v-for</code> ä¸­çš„æ¨¡æ¿å¼•ç”¨<a href="https://staging-cn.vuejs.org/guide/essentials/template-refs.html#refs-inside-v-for" target="_blank" rel="noopener noreferrer">#<ExternalLinkIcon/></a></h2>
<blockquote>
<p>éœ€è¦ v3.2.25 åŠä»¥ä¸Šç‰ˆæœ¬</p>
</blockquote>
<p>å½“åœ¨ <code v-pre>v-for</code> ä¸­ä½¿ç”¨æ¨¡æ¿å¼•ç”¨æ—¶ï¼Œå¯¹åº”çš„ ref ä¸­åŒ…å«çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒå°†åœ¨å…ƒç´ è¢«æŒ‚è½½ååŒ…å«å¯¹åº”æ•´ä¸ªåˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> onMounted } from &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">const list = ref([</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  /* ... */</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">])</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">// ref å®ä¾‹</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">const itemRefs = ref([])</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">onMounted(() =&gt; console.log(itemRefs.value))</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">ul</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &lt;</span><span style="color: var(--shiki-token-string-expression)">li</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">v-for</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;item in list&quot;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;itemRefs&quot;</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      {{ item }}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &lt;/</span><span style="color: var(--shiki-token-string-expression)">li</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;/</span><span style="color: var(--shiki-token-string-expression)">ul</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œref æ•°ç»„å¹¶ä¸ä¿è¯ä¸æºæ•°ç»„ç›¸åŒçš„é¡ºåºã€‚**ğŸ˜</p>
<h3 id="toref" tabindex="-1"><a class="header-anchor" href="#toref" aria-hidden="true">#</a> toRef</h3>
<p>toRef ç”¨äºä¸ºæºå“åº”å¼å¯¹è±¡ä¸Šçš„å±æ€§æ–°å»ºä¸€ä¸ª refï¼Œä»è€Œä¿æŒå¯¹å…¶æºå¯¹è±¡å±æ€§å“åº”å¼çš„<code v-pre>è¿æ¥</code>ï¼Œ<strong>toRef(æºå¯¹è±¡ï¼Œå±æ€§å)</strong></p>
<p>æ³¨æ„ï¼š<strong>æ–°å»ºåçš„å“åº”å¼æ•°æ®</strong>ï¼Œè‹¥ä¸ºå¤æ‚ç±»å‹æ•°æ®ï¼Œæ­¤æ—¶å¹¶ä¸æ˜¯å¯¹åŸå§‹æ•°æ®çš„æ‹·è´ï¼Œè€Œæ˜¯<strong>å¼•ç”¨</strong>ï¼Œæ”¹å˜æ–°å»ºåçš„æ•°æ®ï¼ŒåŸå§‹æ•°æ®ä¹Ÿä¼šè¢«ä¿®æ”¹</p>
<h3 id="ref" tabindex="-1"><a class="header-anchor" href="#ref" aria-hidden="true">#</a> ref</h3>
<p>ref ç”¨äºä¸º<strong>æ•°æ®</strong>æ·»åŠ å“åº”å¼çŠ¶æ€</p>
<h3 id="reactive" tabindex="-1"><a class="header-anchor" href="#reactive" aria-hidden="true">#</a> reactive</h3>
<p>r<strong>eactive åªèƒ½ä¼ å…¥<code v-pre>å¯¹è±¡ç±»å‹</code>çš„å‚æ•°</strong> ï¼Œè€Œå¯¹äºåŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨ ref ä¸ºå…¶æ·»åŠ å“åº”å¼çŠ¶æ€ï¼ŒåŒæ ·è¿”å›ä¸€å…·æœ‰å“åº”å¼çŠ¶æ€çš„<code v-pre>å‰¯æœ¬</code></p>
<blockquote>
<p>æŠ€å·§ï¼šå¯¹ reactive ç±»å‹çš„æ•°æ®ä½¿ç”¨ï¼Œæ¨¡æ¿æˆ–é€»è¾‘ä»£ç ä¸­å¦‚ä½•å‡å°‘é“¾å¼æŸ¥æ‰¾ã€ä½¿ç”¨ toRefs è¿›è¡Œè§£æ„ã€‘</p>
<p>ä¸æ¨èä½¿ç”¨ <code v-pre>reactive()</code> çš„æ³›å‹å‚æ•°ï¼Œå› ä¸ºå¤„ç†äº†æ·±å±‚æ¬¡ ref è§£åŒ…çš„è¿”å›å€¼ä¸æ³›å‹å‚æ•°çš„ç±»å‹ä¸åŒã€‚</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">reactive</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        		attr ï¼š{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        			name</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-string-expression)">&#39;hi&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        			sex</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-token-string-expression)">&#39;å¥³&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        		}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">       		 })</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-token-function)">toRefs</span><span style="color: var(--shiki-color-text)">(count) }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="await-çš„æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#await-çš„æ”¯æŒ" aria-hidden="true">#</a> await çš„æ”¯æŒ</h3>
<p><strong>setup è¯­æ³•ç³–ä¸­å¯ç›´æ¥ä½¿ç”¨ await ï¼Œä¸éœ€è¦å®šä¹‰ async,setup ä¼šè‡ªåŠ¨å˜æˆ async setup</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import api from &#39;../api/Api&#39; const data = await Api.getData() console.log</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	(data)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vue-router4-x" tabindex="-1"><a class="header-anchor" href="#vue-router4-x" aria-hidden="true">#</a> Vue-router4.X</h3>
<p>History ï¼šcreateWebHistory è·¯ç”±æ¨¡å¼è·¯å¾„ä¸å¸¦ #ï¼Œ<strong>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®é¡¹ç›®çš„ï¼Œéœ€è¦ Nginx è½¬å‘</strong></p>
<p>æ³¨æ„ï¼šåœ¨ Vue3 ä¸­ï¼Œåˆ›å»ºè·¯ç”±ä¸å†éœ€è¦å®ä¾‹åŒ– new routerï¼Œç›´æ¥ä½¿ç”¨ createRouter</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { createRouter</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> createWebHistory</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> RouteRecordRaw } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue-router&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">/* or import type { RouteRecordRaw } from &#39;vue-router&#39; è¡¨ç¤ºå¯¼å…¥ä¸ºä¸€ä¸ªç±»å‹ */</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">routes</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">Array</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-function)">RouteRecordRaw</span><span style="color: var(--shiki-color-text)">&gt; </span><span style="color: var(--shiki-token-comment)">/* ç±»å‹æ³¨è§£ */</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		path</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;/&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		redirect</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;/main&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		path</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;/:pathMatch(.*)*&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		name</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;fourOfFour&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">component</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;@/components/404.vue&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">];</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">router</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">createRouter</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	history</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">createWebHistory</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">env</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">BASE_URL</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// æ¨¡å¼è®¾ç½®</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	routes</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> router;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> watch</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å¤šä¸ªæ¥æºç»„æˆçš„æ•°ç»„</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">([x</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">y</span><span style="color: var(--shiki-color-text)">.value]</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> ([newX</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> newY]) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">`x is </span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)">newX</span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)"> and y is </span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)">newY</span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)">`</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// getter å‡½æ•°</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">x</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">y</span><span style="color: var(--shiki-color-text)">.value</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	(sum) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">`sum of x + y is: </span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)">sum</span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)">`</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œä½ ä¸èƒ½ç›´æ¥ä¾¦å¬å“åº”å¼å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¾‹å¦‚:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">obj</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">reactive</span><span style="color: var(--shiki-color-text)">({ count</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// é”™è¯¯ï¼Œå› ä¸º watch() å¾—åˆ°çš„å‚æ•°æ˜¯ä¸€ä¸ª number</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">obj</span><span style="color: var(--shiki-color-text)">.count</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (count) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">`count is: </span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)">count</span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)">`</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œéœ€è¦ç”¨ä¸€ä¸ªè¿”å›è¯¥å±æ€§çš„ getter å‡½æ•°ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// æä¾›ä¸€ä¸ª getter å‡½æ•°</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">obj</span><span style="color: var(--shiki-color-text)">.count</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	(count) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">`count is: </span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)">count</span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)">`</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´æ¥ç»™ <code v-pre>watch()</code> ä¼ å…¥ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¼šéšå¼åœ°åˆ›å»ºä¸€ä¸ªæ·±å±‚ä¾¦å¬å™¨â€”â€”è¯¥å›è°ƒå‡½æ•°åœ¨æ‰€æœ‰åµŒå¥—çš„å˜æ›´æ—¶éƒ½ä¼šè¢«è§¦å‘ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">obj</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">reactive</span><span style="color: var(--shiki-color-text)">({ count</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(obj</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (newValue</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> oldValue) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// åœ¨åµŒå¥—çš„å±æ€§å˜æ›´æ—¶è§¦å‘</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// æ³¨æ„ï¼š`newValue` æ­¤å¤„å’Œ `oldValue` æ˜¯ç›¸ç­‰çš„ğŸ¦«</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// å› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ï¼ˆæŒ‡å‘åŒä¸€ä¸ªå †åœ°å€å€¼ï¼Œåªæ˜¯å±æ€§å€¼è¢«ä¿®æ”¹ï¼‰</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">obj</span><span style="color: var(--shiki-color-text)">.count</span><span style="color: var(--shiki-token-keyword)">++</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸€ä¸ªè¿”å›å“åº”å¼å¯¹è±¡çš„ getter å‡½æ•°ï¼Œåªæœ‰åœ¨è¿”å›ä¸åŒçš„å¯¹è±¡æ—¶ï¼Œæ‰ä¼šè§¦å‘å›è°ƒï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">state</span><span style="color: var(--shiki-color-text)">.someObject</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// ä»…å½“ state.someObject è¢«æ›¿æ¢æ—¶è§¦å‘</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¹Ÿå¯ä»¥ç»™ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¾å¼åœ°åŠ ä¸Š <code v-pre>deep</code> é€‰é¡¹ï¼Œå¼ºåˆ¶è½¬æˆæ·±å±‚ä¾¦å¬å™¨ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">state</span><span style="color: var(--shiki-color-text)">.someObject</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	(newValue</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> oldValue) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// æ³¨æ„ï¼š`newValue` æ­¤å¤„å’Œ `oldValue` æ˜¯ç›¸ç­‰çš„</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// *é™¤é* state.someObject è¢«æ•´ä¸ªæ›¿æ¢äº†</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	{ deep</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)"> }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="watcheffect-ç›‘å¬å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#watcheffect-ç›‘å¬å›è°ƒ" aria-hidden="true">#</a> watchEffect ç›‘å¬å›è°ƒ</h3>
<p><code v-pre>watch()</code> <strong>æ˜¯æ‡’æ‰§è¡Œçš„</strong>ï¼šä»…å½“æ•°æ®æºå˜åŒ–æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå›è°ƒã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨<strong>åˆ›å»ºä¾¦å¬å™¨æ—¶ï¼Œç«‹å³æ‰§è¡Œä¸€éå›è°ƒ</strong>ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è¯·æ±‚ä¸€äº›åˆå§‹æ•°æ®ï¼Œç„¶ååœ¨ç›¸å…³çŠ¶æ€æ›´æ”¹æ—¶é‡æ–°è¯·æ±‚æ•°æ®</p>
<p>ä¸<code v-pre>watch</code>çš„åŒºåˆ«ï¼š<code v-pre>watch</code>æ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ and æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚è€Œ<code v-pre>watchEffect</code>ï¼Œä¸ç”¨æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°çš„å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ï¼Œä¸ç”¨å†™è¿”å›å€¼</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒ</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">watchEffect</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">x1</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">sum</span><span style="color: var(--shiki-color-text)">.value;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">x2</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">person</span><span style="color: var(--shiki-color-text)">.age;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="watch-vs-watcheffect" tabindex="-1"><a class="header-anchor" href="#watch-vs-watcheffect" aria-hidden="true">#</a> <code v-pre>watch</code> vs. <code v-pre>watchEffect</code></h4>
<p><code v-pre>watch</code> å’Œ <code v-pre>watchEffect</code> éƒ½èƒ½å“åº”å¼åœ°æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„å›è°ƒã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯è¿½è¸ªå“åº”å¼ä¾èµ–çš„æ–¹å¼ï¼š</p>
<ul>
<li><code v-pre>watch</code> åªè¿½è¸ªæ˜ç¡®ä¾¦å¬çš„æ•°æ®æºã€‚å®ƒä¸ä¼šè¿½è¸ªä»»ä½•åœ¨å›è°ƒä¸­è®¿é—®åˆ°çš„ä¸œè¥¿ã€‚å¦å¤–ï¼Œä»…åœ¨æ•°æ®æºç¡®å®æ”¹å˜æ—¶æ‰ä¼šè§¦å‘å›è°ƒã€‚<code v-pre>watch</code> ä¼šé¿å…åœ¨å‘ç”Ÿå‰¯ä½œç”¨æ—¶è¿½è¸ªä¾èµ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬<strong>èƒ½æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å›è°ƒå‡½æ•°çš„è§¦å‘æ—¶æœº</strong>ã€‚</li>
<li><code v-pre>watchEffect</code>ï¼Œåˆ™ä¼šåœ¨å‰¯ä½œç”¨å‘ç”ŸæœŸé—´è¿½è¸ªä¾èµ–ã€‚å®ƒä¼šåœ¨<strong>åŒæ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨è¿½è¸ªæ‰€æœ‰èƒ½è®¿é—®åˆ°çš„å“åº”å¼å±æ€§</strong>ã€‚è¿™<strong>æ›´æ–¹ä¾¿</strong>ï¼Œè€Œä¸”ä»£ç å¾€å¾€æ›´ç®€æ´ï¼Œ<strong>ä½†æœ‰æ—¶å…¶å“åº”æ€§ä¾èµ–å…³ç³»ä¼šä¸é‚£ä¹ˆæ˜ç¡®ã€‚</strong></li>
</ul>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºçš„ä¾¦å¬å™¨å›è°ƒï¼Œéƒ½ä¼šåœ¨ Vue ç»„ä»¶æ›´æ–°<strong>ä¹‹å‰</strong>è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ä½ åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®çš„ DOM å°†æ˜¯è¢« Vue æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<p>å¦‚æœæƒ³åœ¨ä¾¦å¬å™¨å›è°ƒä¸­èƒ½è®¿é—®è¢« Vue æ›´æ–°<strong>ä¹‹å</strong>çš„ DOMï¼Œä½ éœ€è¦æŒ‡æ˜ <code v-pre>flush: 'post'</code> é€‰é¡¹ã€<strong>ç±»ä¼¼ nextTick</strong>ã€‘</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">watch</span><span style="color: var(--shiki-color-text)">(source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	flush</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;post&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">watchEffect</span><span style="color: var(--shiki-color-text)">(callback</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	flush</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;post&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç½®åˆ·æ–°çš„ <code v-pre>watchEffect()</code> æœ‰ä¸ªæ›´æ–¹ä¾¿çš„åˆ«å <code v-pre>watchPostEffect()</code>ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { watchPostEffect } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">watchPostEffect</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">/* åœ¨ Vue æ›´æ–°åæ‰§è¡Œ */</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åœæ­¢ä¾¦å¬å™¨" tabindex="-1"><a class="header-anchor" href="#åœæ­¢ä¾¦å¬å™¨" aria-hidden="true">#</a> åœæ­¢ä¾¦å¬å™¨</h2>
<p>åœ¨ <code v-pre>setup()</code> æˆ– <code v-pre>&lt;script setup&gt;</code> ä¸­ç”¨<strong>åŒæ­¥è¯­å¥åˆ›å»ºçš„ä¾¦å¬å™¨</strong>ï¼Œä¼šè‡ªåŠ¨ç»‘å®šåˆ°å®¿ä¸»ç»„ä»¶å®ä¾‹ä¸Šï¼Œå¹¶ä¸”ä¼šåœ¨å®¿ä¸»ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ã€‚å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ æ— éœ€å…³å¿ƒæ€ä¹ˆåœæ­¢ä¸€ä¸ªä¾¦å¬å™¨ã€‚</p>
<p>ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œä¾¦å¬å™¨å¿…é¡»ç”¨<strong>åŒæ­¥</strong>è¯­å¥åˆ›å»ºï¼šå¦‚æœ**ç”¨å¼‚æ­¥å›è°ƒåˆ›å»ºä¸€ä¸ªä¾¦å¬å™¨ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šç»‘å®šåˆ°å½“å‰ç»„ä»¶ä¸Šï¼Œä½ å¿…é¡»æ‰‹åŠ¨åœæ­¢å®ƒï¼Œä»¥é˜²å†…å­˜æ³„æ¼ã€‚**å¦‚ä¸‹æ–¹è¿™ä¸ªä¾‹å­ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import {watchEffect} from &#39;vue&#39; // å®ƒä¼šè‡ªåŠ¨åœæ­¢ watchEffect(() =&gt; {}) //</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	...è¿™ä¸ªåˆ™ä¸ä¼šï¼ setTimeout(() =&gt; {</span><span style="color: var(--shiki-token-function)">watchEffect</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {})}, 100)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦æ‰‹åŠ¨åœæ­¢ä¸€ä¸ªä¾¦å¬å™¨ï¼Œè¯·è°ƒç”¨ <code v-pre>watch</code> æˆ– <code v-pre>watchEffect</code> è¿”å›çš„å‡½æ•°ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">unwatch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">watchEffect</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">unwatch</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="isref" tabindex="-1"><a class="header-anchor" href="#isref" aria-hidden="true">#</a> isRef</h3>
<p>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª<code v-pre>ref</code>å¯¹è±¡</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">val</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;xxx&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">isRef</span><span style="color: var(--shiki-color-text)">(val); </span><span style="color: var(--shiki-token-comment)">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="isreactive" tabindex="-1"><a class="header-anchor" href="#isreactive" aria-hidden="true">#</a> isReactive</h3>
<p>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª<code v-pre>isReactive</code>å¯¹è±¡</p>
<h3 id="isproxy" tabindex="-1"><a class="header-anchor" href="#isproxy" aria-hidden="true">#</a> isProxy</h3>
<p>æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯ç”±<code v-pre>reactive</code>æˆ–<code v-pre>readonly</code>åˆ›å»ºçš„<code v-pre>proxy</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">state</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">reactive</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	name</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;John&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)">isProxy</span><span style="color: var(--shiki-color-text)">(state)); </span><span style="color: var(--shiki-token-comment)">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="å…¨å±€-api-è°ƒæ•´" tabindex="-1"><a class="header-anchor" href="#å…¨å±€-api-è°ƒæ•´" aria-hidden="true">#</a> å…¨å±€ API è°ƒæ•´</h1>
<hr>
<p>å°†å…¨å±€çš„ APIï¼Œå³ï¼š<a href="http://Vue.xxx" target="_blank" rel="noopener noreferrer">Vue.xxx<ExternalLinkIcon/></a> è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆappï¼‰ä¸Š</p>
<table>
<thead>
<tr>
<th>VUE 2</th>
<th>VUE 3</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://Vue.config.xxx" target="_blank" rel="noopener noreferrer">Vue.config.xxx<ExternalLinkIcon/></a></td>
<td><a href="http://app.config.xxx" target="_blank" rel="noopener noreferrer">app.config.xxx<ExternalLinkIcon/></a></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody>
</table>
<h1 id="ç§»é™¤çš„-api" tabindex="-1"><a class="header-anchor" href="#ç§»é™¤çš„-api" aria-hidden="true">#</a> ç§»é™¤çš„ API</h1>
<hr>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç°çŠ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vue.config.productionTip</td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td><strong>config.keyCodes</strong></td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td><strong>$children</strong></td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td><strong>$listeners</strong></td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td>$on</td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td>$off</td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td>$once</td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td><strong>filters</strong></td>
<td>å·²ç§»é™¤</td>
</tr>
<tr>
<td><strong>ç§»é™¤ api</strong></td>
<td>å·²ç§»é™¤</td>
</tr>
</tbody>
</table>
<h3 id="hook-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#hook-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶" aria-hidden="true">#</a> hook ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</h3>
<p>é€šè¿‡äº‹ä»¶æ¥ç›‘å¬ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„å…³é”®é˜¶æ®µ</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">// VUE 2</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">child-component</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">@hook:updated</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;onUpdated&quot;</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">// VUE 3</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">child-component</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">@vnode-updated</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;onUpdated&quot;</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">// é©¼å³°å†™æ³•</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">child-component</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">@vnodeUpdated</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;onUpdated&quot;</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸º-provide-inject-æ ‡æ³¨ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä¸º-provide-inject-æ ‡æ³¨ç±»å‹" aria-hidden="true">#</a> ä¸º provide / inject æ ‡æ³¨ç±»å‹<a href="https://staging-cn.vuejs.org/guide/typescript/composition-api.html#typing-provide-inject" target="_blank" rel="noopener noreferrer">#<ExternalLinkIcon/></a></h3>
<p>provide å’Œ inject é€šå¸¸ä¼šåœ¨ä¸åŒçš„ç»„ä»¶ä¸­è¿è¡Œã€‚è¦æ­£ç¡®åœ°ä¸ºæ³¨å…¥çš„å€¼æ ‡è®°ç±»å‹ï¼ŒVue æä¾›äº†ä¸€ä¸ª <code v-pre>InjectionKey</code> æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª <code v-pre>Symbol</code> çš„æ³›å‹ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥åœ¨æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´åŒæ­¥æ³¨å…¥å€¼çš„ç±»å‹ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { provide</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> inject } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { InjectionKey } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">key</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Symbol</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-keyword)">as</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">InjectionKey</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">provide</span><span style="color: var(--shiki-color-text)">(key</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-comment)">// è‹¥æä¾›çš„æ˜¯éå­—ç¬¦ä¸²å€¼ä¼šå¯¼è‡´é”™è¯¯</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(key) </span><span style="color: var(--shiki-token-comment)">// foo çš„ç±»å‹ï¼šstring | undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å»ºè®®å°†æ³¨å…¥ key çš„ç±»å‹æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è¢«å¤šä¸ªç»„ä»¶å¯¼å…¥ã€‚</strong></p>
<p><strong>å½“ä½¿ç”¨å­—ç¬¦ä¸²æ³¨å…¥ key æ—¶ï¼Œæ³¨å…¥å€¼çš„ç±»å‹æ˜¯ <code v-pre>unknown</code>ï¼Œéœ€è¦é€šè¿‡æ³›å‹å‚æ•°æ˜¾å¼å£°æ˜ï¼š</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> inject </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> string </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-comment)">// ç±»å‹ï¼šstring | undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„æ³¨å…¥çš„å€¼ä»ç„¶å¯ä»¥æ˜¯ <code v-pre>undefined</code>ï¼Œå› ä¸ºæ— æ³•ä¿è¯æä¾›è€…ä¸€å®šä¼šåœ¨è¿è¡Œæ—¶ provide è¿™ä¸ªå€¼ã€‚</p>
<p>å½“æä¾›äº†ä¸€ä¸ªé»˜è®¤å€¼åï¼Œè¿™ä¸ª <code v-pre>undefined</code> ç±»å‹å°±å¯ä»¥è¢«ç§»é™¤ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)"> &lt; </span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)"> &gt; (</span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;bar&#39;</span><span style="color: var(--shiki-color-text)">); </span><span style="color: var(--shiki-token-comment)">// ç±»å‹ï¼šstring</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœä½ ç¡®å®šè¯¥å€¼å°†å§‹ç»ˆè¢«æä¾›ï¼Œåˆ™è¿˜å¯ä»¥å¼ºåˆ¶è½¬æ¢è¯¥å€¼ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-keyword)">as</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">string</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ä¸ºæ¨¡æ¿å¼•ç”¨æ ‡æ³¨ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä¸ºæ¨¡æ¿å¼•ç”¨æ ‡æ³¨ç±»å‹" aria-hidden="true">#</a> ä¸ºæ¨¡æ¿å¼•ç”¨æ ‡æ³¨ç±»å‹</h3>
<p>æ¨¡æ¿å¼•ç”¨éœ€è¦é€šè¿‡ä¸€ä¸ªæ˜¾å¼æŒ‡å®šçš„æ³›å‹å‚æ•°å’Œä¸€ä¸ªåˆå§‹å€¼ <code v-pre>null</code> æ¥åˆ›å»ºï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">lang</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;ts&quot;</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> onMounted } from &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">const el = ref&lt;</span><span style="color: var(--shiki-token-constant)">HTMLInputElement</span><span style="color: var(--shiki-color-text)"> | </span><span style="color: var(--shiki-token-function)">null</span><span style="color: var(--shiki-color-text)">&gt;(null)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">onMounted(() =&gt; {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">el</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-token-function)">?.focus</span><span style="color: var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;el&quot;</span><span style="color: var(--shiki-color-text)"> /&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼šä¸ºäº†ä¸¥æ ¼çš„ç±»å‹å®‰å…¨ï¼Œæœ‰å¿…è¦åœ¨è®¿é—® <code v-pre>el.value</code> æ—¶ä½¿ç”¨å¯é€‰é“¾æˆ–ç±»å‹å®ˆå«ã€‚è¿™æ˜¯å› ä¸ºç›´åˆ°ç»„ä»¶è¢«æŒ‚è½½å‰ï¼Œè¿™ä¸ª ref çš„å€¼éƒ½æ˜¯åˆå§‹çš„ <code v-pre>null</code>ï¼Œå¹¶ä¸”åœ¨ç”±äº <code v-pre>v-if</code> çš„è¡Œä¸ºå°†å¼•ç”¨çš„å…ƒç´ å¸è½½æ—¶ä¹Ÿå¯ä»¥è¢«è®¾ç½®ä¸º <code v-pre>null</code>ã€‚</strong></p>
<h3 id="v-if-å’Œ-v-for" tabindex="-1"><a class="header-anchor" href="#v-if-å’Œ-v-for" aria-hidden="true">#</a> <code v-pre>v-if</code> å’Œ <code v-pre>v-for</code></h3>
<blockquote>
<p>è­¦å‘Š</p>
<p>åŒæ—¶ä½¿ç”¨ <code v-pre>v-if</code> å’Œ <code v-pre>v-for</code> æ˜¯<strong>ä¸æ¨èçš„</strong>ï¼Œå› ä¸ºè¿™æ ·äºŒè€…çš„ä¼˜å…ˆçº§ä¸æ˜æ˜¾ã€‚è¯·æŸ¥çœ‹<a href="https://staging-cn.vuejs.org/style-guide/#avoid-v-if-with-v-for-essential" target="_blank" rel="noopener noreferrer">é£æ ¼æŒ‡å—<ExternalLinkIcon/></a>è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p>
<p><strong>å½“ <code v-pre>v-if</code> å’Œ <code v-pre>v-for</code> åŒæ—¶å­˜åœ¨äºä¸€ä¸ªå…ƒç´ ä¸Šçš„æ—¶å€™ï¼Œ<code v-pre>v-if</code> ä¼šé¦–å…ˆè¢«æ‰§è¡Œ</strong>ã€‚è¯·æŸ¥çœ‹<a href="https://staging-cn.vuejs.org/guide/essentials/list.html#v-for-with-v-if" target="_blank" rel="noopener noreferrer">åˆ—è¡¨æ¸²æŸ“æŒ‡å—<ExternalLinkIcon/></a>è·å–æ›´å¤šç»†èŠ‚ã€‚</p>
</blockquote>
<h3 id="åŠ¨æ€ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€ç»„ä»¶" aria-hidden="true">#</a> åŠ¨æ€ç»„ä»¶</h3>
<p>å½“ä½¿ç”¨ <code v-pre>&lt;component :is=&quot;...&quot;&gt;</code> æ¥åœ¨å¤šä¸ªç»„ä»¶é—´ä½œåˆ‡æ¢æ—¶ï¼Œè¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä¼šè¢«å¸è½½ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code v-pre>keep-alive</code> ç»„ä»¶å¼ºåˆ¶è¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä»ç„¶ä¿æŒâ€œå­˜æ´»â€çš„çŠ¶æ€ã€‚</p>
<h3 id="ä¾èµ–æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–æ³¨å…¥" aria-hidden="true">#</a> ä¾èµ–æ³¨å…¥</h3>
<p>è¦ä¸ºç»„ä»¶åä»£æä¾›æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨åˆ° <a href="https://staging-cn.vuejs.org/api/composition-api-dependency-injection.html#provide" target="_blank" rel="noopener noreferrer"><code v-pre>provide()</code><ExternalLinkIcon/></a> å‡½æ•°ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import {provide} from &#39;vue&#39; provide(/* æ³¨å…¥å(String,Symbol) */ &#39;message&#39;,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	/* å€¼ */ &#39;hello!&#39;)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸ä½¿ç”¨ <code v-pre>&lt;script setup&gt;</code>ï¼Œè¯·ç¡®ä¿ <code v-pre>provide()</code> æ˜¯åœ¨ <code v-pre>setup()</code> åŒæ­¥è°ƒç”¨çš„ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { provide } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">provide</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/* æ³¨å…¥å */</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;message&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">/* å€¼ */</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello!&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†åœ¨ä¸€ä¸ªç»„ä»¶ä¸­æä¾›ä¾èµ–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨å±‚é¢æä¾›ä¾èµ–ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { createApp } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">createApp</span><span style="color: var(--shiki-color-text)">({});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-token-function)">.provide</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/* æ³¨å…¥å */</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;message&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">/* å€¼ */</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello!&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨åº”ç”¨çº§åˆ«æä¾›çš„æ•°æ®åœ¨è¯¥åº”ç”¨å†…çš„æ‰€æœ‰ç»„ä»¶ä¸­éƒ½å¯ä»¥æ³¨å…¥ã€‚è¿™åœ¨ä½ ç¼–å†™<a href="https://staging-cn.vuejs.org/guide/reusability/plugins.html" target="_blank" rel="noopener noreferrer">æ’ä»¶<ExternalLinkIcon/></a>æ—¶ä¼šç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºæ’ä»¶ä¸€èˆ¬éƒ½ä¸ä¼šä½¿ç”¨ç»„ä»¶å½¢å¼æ¥æä¾›å€¼ã€‚</p>
<p>è¦æ³¨å…¥ä¸Šå±‚ç»„ä»¶æä¾›çš„æ•°æ®ï¼Œéœ€ä½¿ç”¨ <a href="https://staging-cn.vuejs.org/api/composition-api-dependency-injection.html#inject" target="_blank" rel="noopener noreferrer"><code v-pre>inject()</code><ExternalLinkIcon/></a> å‡½æ•°ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import {inject} from &#39;vue&#39; const message = inject(&#39;message&#39;)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å¦‚æœæä¾›çš„å€¼æ˜¯ä¸€ä¸ª refï¼Œæ³¨å…¥è¿›æ¥çš„ä¼šæ˜¯<strong>è¯¥ ref å¯¹è±¡</strong>ï¼Œè€Œ<strong>ä¸ä¼š</strong>è‡ªåŠ¨è§£åŒ…ä¸ºå…¶å†…éƒ¨çš„å€¼ã€‚è¿™ä½¿å¾—æ³¨å…¥æ–¹ç»„ä»¶èƒ½å¤Ÿé€šè¿‡ ref å¯¹è±¡ä¿æŒäº†å’Œä¾›ç»™æ–¹çš„å“åº”æ€§é“¾æ¥</p>
</blockquote>
<p>å¦‚æœä¸ä½¿ç”¨ <code v-pre>&lt;script setup&gt;</code>åŒä¸Šæ³¨å…¥ä½¿ç”¨æ–¹æ³•</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å¦‚æœæ²¡æœ‰ç¥–å…ˆç»„ä»¶æä¾› &quot;message&quot;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// `value` ä¼šæ˜¯ &quot;è¿™æ˜¯é»˜è®¤å€¼&quot;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;message&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;è¿™æ˜¯é»˜è®¤å€¼&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œé»˜è®¤å€¼å¯èƒ½éœ€è¦é€šè¿‡è°ƒç”¨ä¸€ä¸ªå‡½æ•°æˆ–åˆå§‹åŒ–ä¸€ä¸ªç±»æ¥å–å¾—ã€‚<strong>ä¸ºäº†é¿å…åœ¨ç”¨ä¸åˆ°é»˜è®¤å€¼çš„æƒ…å†µä¸‹è¿›è¡Œä¸å¿…è¦çš„è®¡ç®—æˆ–äº§ç”Ÿå‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°æ¥åˆ›å»ºé»˜è®¤å€¼</strong>ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;key&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ExpensiveClass</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote>
<p>å½“æä¾›æ³¨å…¥å“åº”å¼çš„æ•°æ®æ—¶ï¼Œ<strong>å»ºè®®å°½å¯èƒ½å°†ä»»ä½•å¯¹å“åº”å¼çŠ¶æ€çš„å˜æ›´çš„æ–¹æ³•éƒ½ä¿æŒåœ¨ä¾›ç»™æ–¹ç»„ä»¶ä¸­</strong>ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ‰€æä¾›çŠ¶æ€çš„å£°æ˜å’Œå˜æ›´æ“ä½œéƒ½å†…èšåœ¨åŒä¸€ä¸ªç»„ä»¶å†…ï¼Œä½¿å…¶æ›´å®¹æ˜“ç»´æŠ¤ã€‚(é…å¥—æä¾›ä¸€ä¸ªä¿®æ”¹çŠ¶æ€æ•°æ®çš„å‡½æ•°ï¼Œç»™å­ç»„ä»¶è°ƒç”¨æ›´æ–°æ•°æ®</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">&lt;!--</span><span style="color: var(--shiki-color-text)"> åœ¨ä¾›ç»™æ–¹ç»„ä»¶å†… </span><span style="color: var(--shiki-token-keyword)">--&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { provide</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> ref } from &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">const location = ref(&#39;North Pole&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">function updateLocation() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">location</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;South Pole&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">provide(&#39;location&#39;, {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  location</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  updateLocation</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">&lt;!--</span><span style="color: var(--shiki-color-text)"> åœ¨æ³¨å…¥æ–¹ç»„ä»¶ </span><span style="color: var(--shiki-token-keyword)">--&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { inject } from &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">const { location</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> updateLocation } = inject(&#39;location&#39;)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">button</span><span style="color: var(--shiki-color-text)"> @click=&quot;updateLocation&quot;&gt;{{ </span><span style="color: var(--shiki-token-function)">location</span><span style="color: var(--shiki-color-text)"> }}&lt;/button&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œå¦‚æœä½ æƒ³ç¡®ä¿æä¾›çš„æ•°æ®ä¸èƒ½è¢«æ³¨å…¥æ–¹çš„ç»„ä»¶æ›´æ”¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://staging-cn.vuejs.org/api/reactivity-core.html#readonly" target="_blank" rel="noopener noreferrer"><code v-pre>readonly()</code><ExternalLinkIcon/></a> æ¥åŒ…è£…æä¾›çš„å€¼ã€‚</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	import {(ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> provide</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> readonly)} from &#39;vue&#39; const count = ref(0)</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	provide(&#39;read-only-count&#39;, readonly(count))</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šå»ºè®®æœ€å¥½ä½¿ç”¨ Symbol æ¥ä½œä¸ºæ³¨å…¥åä»¥é¿å…æ½œåœ¨çš„å†²çªã€‚</p>
<h4 id="ä¸º-provide-inject-æ ‡æ³¨ç±»å‹-1" tabindex="-1"><a class="header-anchor" href="#ä¸º-provide-inject-æ ‡æ³¨ç±»å‹-1" aria-hidden="true">#</a> ä¸º provide / inject æ ‡æ³¨ç±»å‹</h4>
<p>Vue æä¾›äº†ä¸€ä¸ª <code v-pre>InjectionKey</code> æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª <code v-pre>Symbol</code> çš„æ³›å‹ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥åœ¨æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´åŒæ­¥æ³¨å…¥å€¼çš„ç±»å‹ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { provide</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> inject } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { InjectionKey } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">key</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Symbol</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-keyword)">as</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">InjectionKey</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-function)">provide</span><span style="color: var(--shiki-color-text)">(key</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-comment)">// è‹¥æä¾›çš„æ˜¯éå­—ç¬¦ä¸²å€¼ä¼šå¯¼è‡´é”™è¯¯</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(key) </span><span style="color: var(--shiki-token-comment)">// foo çš„ç±»å‹ï¼šstring | undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å»ºè®®å°†æ³¨å…¥ key çš„ç±»å‹æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è¢«å¤šä¸ªç»„ä»¶å¯¼å…¥ã€‚</p>
<p><strong>å½“ä½¿ç”¨å­—ç¬¦ä¸²æ³¨å…¥ key æ—¶ï¼Œæ³¨å…¥å€¼çš„ç±»å‹æ˜¯ <code v-pre>unknown</code>ï¼Œéœ€è¦é€šè¿‡æ³›å‹å‚æ•°æ˜¾å¼å£°æ˜ï¼š</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> inject </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> string </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">; </span><span style="color: var(--shiki-token-comment)">// ç±»å‹ï¼šstring | undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„æ³¨å…¥çš„å€¼ä»ç„¶å¯ä»¥æ˜¯ <code v-pre>undefined</code>ï¼Œå› ä¸º<strong>æ— æ³•ä¿è¯æä¾›è€…ä¸€å®šä¼šåœ¨è¿è¡Œæ—¶ provide è¿™ä¸ªå€¼</strong>ã€‚</p>
<p><strong>å½“æä¾›äº†ä¸€ä¸ªé»˜è®¤å€¼'bar'åï¼Œè¿™ä¸ª <code v-pre>undefined</code> ç±»å‹å°±å¯ä»¥è¢«ç§»é™¤ï¼š</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)"> &lt; </span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)"> &gt; (</span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;bar&#39;</span><span style="color: var(--shiki-color-text)">); </span><span style="color: var(--shiki-token-comment)">// ç±»å‹ï¼šstring</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœä½ ç¡®å®šè¯¥å€¼å°†å§‹ç»ˆè¢«æä¾›ï¼Œåˆ™è¿˜å¯ä»¥å¼ºåˆ¶è½¬æ¢è¯¥å€¼ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">inject</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-keyword)">as</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">string</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ç»„åˆå¼å‡½æ•°-hook" tabindex="-1"><a class="header-anchor" href="#ç»„åˆå¼å‡½æ•°-hook" aria-hidden="true">#</a> ç»„åˆå¼å‡½æ•°(hook)</h2>
<h3 id="ä»€ä¹ˆæ˜¯-ç»„åˆå¼å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-ç»„åˆå¼å‡½æ•°" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯â€œç»„åˆå¼å‡½æ•°â€ï¼Ÿ</h3>
<blockquote>
<p>â€œç»„åˆå¼å‡½æ•°â€(Composables) æ˜¯ä¸€ä¸ª<strong>åˆ©ç”¨ Vue ç»„åˆå¼ API æ¥å°è£…å’Œå¤ç”¨æœ‰çŠ¶æ€é€»è¾‘çš„å‡½æ•°</strong>ã€‚</p>
<p>å¤ç”¨å…¬å…±ä»»åŠ¡çš„é€»è¾‘ã€‚ä¾‹å¦‚ä¸ºäº†åœ¨ä¸åŒåœ°æ–¹æ ¼å¼åŒ–æ—¶é—´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŠ½å–ä¸€ä¸ªå¯å¤ç”¨çš„æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°è£…äº†<strong>æ— çŠ¶æ€çš„é€»è¾‘</strong>ï¼šå®ƒåœ¨æ¥æ”¶ä¸€äº›è¾“å…¥åç«‹åˆ»è¿”å›æ‰€æœŸæœ›çš„è¾“å‡ºã€‚å¤ç”¨æ— çŠ¶æ€é€»è¾‘çš„åº“æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä½ å¯èƒ½å·²ç»ç”¨è¿‡çš„ <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">lodash<ExternalLinkIcon/></a> æˆ–æ˜¯ <a href="https://date-fns.org/" target="_blank" rel="noopener noreferrer">date-fns<ExternalLinkIcon/></a>ã€‚</p>
<p>ğŸ“¦: å’Œåœ¨ç»„ä»¶ä¸­ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨æ‰€æœ‰çš„ç»„åˆå¼ API,è¿˜å¯ä»¥åµŒå¥—å¤šä¸ªç»„åˆå¼å‡½æ•°ï¼šä¸€ä¸ªç»„åˆå¼å‡½æ•°å¯ä»¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–çš„ç»„åˆå¼å‡½æ•°ã€‚</p>
<p><strong><code v-pre>è¿™æ­£æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å†³å®šå°†å®ç°äº†è¿™ä¸€è®¾è®¡æ¨¡å¼çš„ API é›†åˆå‘½åä¸ºç»„åˆå¼ API</code></strong>ã€‚</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// mouse.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ref } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { useEventListener } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./event&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useMouse</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">x</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">y</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">useEventListener</span><span style="color: var(--shiki-color-text)">(window</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;mousemove&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (event) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">x</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">event</span><span style="color: var(--shiki-color-text)">.pageX;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">y</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">event</span><span style="color: var(--shiki-color-text)">.pageY;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { x</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> y };</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼šå¿…é¡»æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å»ºè®®ä»¥ use å‰ç¼€å‘½å</strong></p>
<h5 id="å¸¦å‚æ•°çš„ç»„åˆå¼å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å¸¦å‚æ•°çš„ç»„åˆå¼å‡½æ•°" aria-hidden="true">#</a> å¸¦å‚æ•°çš„ç»„åˆå¼å‡½æ•°</h5>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// fetch.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> isRef</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> unref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> watchEffect } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useFetch</span><span style="color: var(--shiki-color-text)">(url) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">data</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">error</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">doFetch</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// åœ¨è¯·æ±‚ä¹‹å‰é‡è®¾çŠ¶æ€...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">data</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">error</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// unref() è§£åŒ…å¯èƒ½ä¸º ref çš„å€¼</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)">unref</span><span style="color: var(--shiki-color-text)">(url))</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">((res) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">res</span><span style="color: var(--shiki-token-function)">.json</span><span style="color: var(--shiki-color-text)">())</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">((json) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">data</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> json))</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-function)">.catch</span><span style="color: var(--shiki-color-text)">((err) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">error</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> err));</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-function)">isRef</span><span style="color: var(--shiki-color-text)">(url)) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// è‹¥è¾“å…¥çš„ URL æ˜¯ä¸€ä¸ª refï¼Œé‚£ä¹ˆå¯åŠ¨ä¸€ä¸ªå“åº”å¼çš„è¯·æ±‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">watchEffect</span><span style="color: var(--shiki-color-text)">(doFetch);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	} </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// å¦åˆ™åªè¯·æ±‚ä¸€æ¬¡</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// é¿å…ç›‘å¬å™¨çš„é¢å¤–å¼€é”€</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-function)">doFetch</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { data</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> error };</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p><code v-pre>useFetch()</code> ç°åœ¨åŒæ—¶å¯ä»¥æ¥æ”¶é™æ€çš„ URL å­—ç¬¦ä¸²å’Œ URL å­—ç¬¦ä¸²çš„ refã€‚å½“é€šè¿‡ <a href="https://staging-cn.vuejs.org/api/reactivity-utilities.html#isref" target="_blank" rel="noopener noreferrer"><code v-pre>isRef()</code><ExternalLinkIcon/></a> æ£€æµ‹åˆ° URL æ˜¯ä¸€ä¸ªåŠ¨æ€ ref æ—¶ï¼Œå®ƒä¼šä½¿ç”¨ <a href="https://staging-cn.vuejs.org/api/reactivity-core.html#watcheffect" target="_blank" rel="noopener noreferrer"><code v-pre>watchEffect()</code><ExternalLinkIcon/></a> å¯åŠ¨ä¸€ä¸ªå“åº”å¼çš„ effectã€‚è¯¥ effect ä¼šç«‹åˆ»æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­å°† URL çš„ ref ä½œä¸ºä¾èµ–è¿›è¡Œè·Ÿè¸ªã€‚å½“ URL çš„ ref å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ•°æ®å°±ä¼šè¢«é‡ç½®ï¼Œå¹¶é‡æ–°è¯·æ±‚ã€‚</p>
</blockquote>
<p><strong>å°½ç®¡å…¶å“åº”æ€§ä¸ä¾èµ– refï¼Œç»„åˆå¼å‡½æ•°ä»å¯æ¥æ”¶ ref å‚æ•°</strong>ã€‚å¦‚æœç¼–å†™çš„ç»„åˆå¼å‡½æ•°ä¼šè¢«å…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œä½ <strong>æœ€å¥½åœ¨å¤„ç†è¾“å…¥å‚æ•°æ—¶å…¼å®¹ ref è€Œä¸åªæ˜¯åŸå§‹çš„å€¼</strong>ã€‚<code v-pre>unref()</code>å·¥å…·å‡½æ•°ä¼šå¯¹æ­¤éå¸¸æœ‰å¸®åŠ©ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { unref } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useFeature</span><span style="color: var(--shiki-color-text)">(maybeRef) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// è‹¥ maybeRef ç¡®å®æ˜¯ä¸€ä¸ª refï¼Œå®ƒçš„ .value ä¼šè¢«è¿”å›ğŸ‘</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// å¦åˆ™ï¼ŒmaybeRef ä¼šè¢«åŸæ ·è¿”å›</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">value</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">unref</span><span style="color: var(--shiki-color-text)">(maybeRef);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¦‚æœä½ çš„ç»„åˆå¼å‡½æ•°åœ¨æ¥æ”¶ ref ä¸ºå‚æ•°æ—¶ä¼šäº§ç”Ÿå“åº”å¼ effectï¼Œè¯·ç¡®ä¿ä½¿ç”¨ <code v-pre>watch()</code> æ˜¾å¼åœ°ç›‘å¬æ­¤ refï¼Œæˆ–è€…åœ¨ <code v-pre>watchEffect()</code> ä¸­è°ƒç”¨ <code v-pre>unref()</code> æ¥è¿›è¡Œæ­£ç¡®çš„è¿½è¸ªã€‚</strong></p>
<p>åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨ <code v-pre>ref()</code> è€Œä¸æ˜¯ <code v-pre>reactive()</code>ã€‚æˆ‘ä»¬æ¨èçš„çº¦å®šæ˜¯ç»„åˆå¼å‡½æ•°å§‹ç»ˆè¿”å›ä¸€ä¸ªåŒ…å«å¤šä¸ª ref çš„æ™®é€šçš„éå“åº”å¼å¯¹è±¡ï¼Œ<strong>è¿™æ ·è¯¥å¯¹è±¡åœ¨ç»„ä»¶ä¸­è¢«è§£æ„ä¸º ref ä¹‹åä»å¯ä»¥ä¿æŒå“åº”æ€§ï¼š</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// x å’Œ y æ˜¯ä¸¤ä¸ª ref</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">x</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">y</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">useMouse</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p><strong>ä»ç»„åˆå¼å‡½æ•°è¿”å›ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¼šå¯¼è‡´åœ¨å¯¹è±¡è§£æ„è¿‡ç¨‹ä¸­ä¸¢å¤±ä¸ç»„åˆå¼å‡½æ•°å†…çŠ¶æ€çš„å“åº”æ€§è¿æ¥ã€‚ä¸ä¹‹ç›¸åï¼Œref åˆ™å¯ä»¥ç»´æŒè¿™ä¸€å“åº”æ€§è¿æ¥</strong>ğŸ“¦</p>
</blockquote>
<blockquote>
<p>ç¡®ä¿åœ¨ <code v-pre>onUnmounted()</code> æ—¶æ¸…ç†å‰¯ä½œç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªç»„åˆå¼å‡½æ•°è®¾ç½®äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒå°±åº”è¯¥åœ¨ <code v-pre>onUnmounted()</code> ä¸­è¢«ç§»é™¤ (å°±åƒæˆ‘ä»¬åœ¨ <code v-pre>useMouse()</code> ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ä¸€æ ·)ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åƒä¹‹å‰çš„ <code v-pre>useEventListener()</code> ç¤ºä¾‹é‚£æ ·ï¼Œä½¿ç”¨ä¸€ä¸ªç»„åˆå¼å‡½æ•°æ¥è‡ªåŠ¨å¸®ä½ åšè¿™äº›äº‹ã€‚</p>
</blockquote>
<blockquote>
<p>ç»„åˆå¼å‡½æ•°åœ¨ <code v-pre>&lt;script setup&gt;</code> æˆ– <code v-pre>setup()</code> é’©å­ä¸­ï¼Œ<strong>åº”å§‹ç»ˆè¢«åŒæ­¥åœ°è°ƒç”¨ã€‚</strong></p>
</blockquote>
<p>æ³¨æ„ï¼šè¿™ä¸ªé™åˆ¶æ˜¯ä¸ºäº†è®© Vue èƒ½å¤Ÿç¡®å®šå½“å‰æ­£åœ¨è¢«æ‰§è¡Œçš„åˆ°åº•æ˜¯å“ªä¸ªç»„ä»¶å®ä¾‹ï¼Œåªæœ‰èƒ½ç¡®è®¤å½“å‰ç»„ä»¶å®ä¾‹ï¼Œæ‰èƒ½å¤Ÿï¼šğŸ“¦</p>
<ol>
<li><strong>å°†ç”Ÿå‘½å‘¨æœŸé’©å­æ³¨å†Œåˆ°è¯¥ç»„ä»¶å®ä¾‹ä¸Š</strong></li>
<li><strong>å°†è®¡ç®—å±æ€§å’Œç›‘å¬å™¨æ³¨å†Œåˆ°è¯¥ç»„ä»¶å®ä¾‹ä¸Šï¼Œä»¥ä¾¿åœ¨è¯¥ç»„ä»¶è¢«å¸è½½æ—¶åœæ­¢ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</strong></li>
</ol>
<blockquote>
<p>TIP:</p>
<p><code v-pre>&lt;script setup&gt; æ˜¯å”¯ä¸€åœ¨è°ƒç”¨ await ä¹‹åä»å¯è°ƒç”¨ç»„åˆå¼å‡½æ•°çš„åœ°æ–¹ã€‚ç¼–è¯‘å™¨ä¼šåœ¨å¼‚æ­¥æ“ä½œä¹‹åè‡ªåŠ¨ä¸ºä½ æ¢å¤å½“å‰çš„ç»„ä»¶å®ä¾‹ã€‚</code></p>
</blockquote>
<h4 id="hook-or-mixin" tabindex="-1"><a class="header-anchor" href="#hook-or-mixin" aria-hidden="true">#</a> Hook or Mixin</h4>
<p>å½“ä½¿ç”¨äº†å¤šä¸ª mixin æ—¶ï¼Œå®ä¾‹ä¸Šçš„æ•°æ®å±æ€§æ¥è‡ªå“ªä¸ª mixin å˜å¾—ä¸æ¸…æ™°ï¼Œæ¨èåœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨ ref + è§£æ„æ¨¡å¼çš„ç†ç”±ï¼š<strong>è®©å±æ€§çš„æ¥æºåœ¨æ¶ˆè´¹ç»„ä»¶æ—¶ä¸€ç›®äº†ç„¶ã€‚</strong>(æ¥è‡ªå“ªä¸ª Hook çš„ï¼Œå¯ä»¥ä»è§£æ„ä¸­äº†è§£åˆ°)</p>
<p>å¤šä¸ªæ¥è‡ªä¸åŒä½œè€…çš„ mixin å¯èƒ½ä¼šæ³¨å†Œç›¸åŒçš„å±æ€§åï¼Œé€ æˆå‘½åå†²çªã€‚è‹¥ä½¿ç”¨ç»„åˆå¼å‡½æ•°ï¼Œä½ <strong>å¯ä»¥é€šè¿‡åœ¨è§£æ„å˜é‡æ—¶å¯¹å˜é‡è¿›è¡Œé‡å‘½åæ¥é¿å…ç›¸åŒçš„é”®å</strong>ã€‚</p>
<p>å¤šä¸ª mixin éœ€è¦ä¾èµ–å…±äº«çš„å±æ€§åæ¥è¿›è¡Œç›¸äº’ä½œç”¨ï¼Œè¿™ä½¿å¾—å®ƒä»¬<strong>éšæ€§åœ°è€¦åˆåœ¨ä¸€èµ·</strong>ã€‚è€Œä¸€ä¸ªç»„åˆå¼å‡½æ•°çš„<strong>è¿”å›å€¼å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªç»„åˆå¼å‡½æ•°çš„å‚æ•°è¢«ä¼ å…¥ï¼Œåƒæ™®é€šå‡½æ•°é‚£æ ·</strong>ã€‚</p>
<h3 id="vue-ä¸­é‡ç”¨ä»£ç çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#vue-ä¸­é‡ç”¨ä»£ç çš„æ–¹å¼" aria-hidden="true">#</a> Vue ä¸­é‡ç”¨ä»£ç çš„æ–¹å¼</h3>
<p><code v-pre>ç»„ä»¶</code>ã€<code v-pre>ç»„åˆå¼å‡½æ•°</code>ã€<code v-pre>è‡ªå®šä¹‰æŒ‡ä»¤</code>ï¼Œ<strong>ç»„ä»¶æ˜¯ä¸»è¦çš„æ„å»ºæ¨¡å—ï¼Œè€Œç»„åˆå¼å‡½æ•°åˆ™ä¾§é‡äºæœ‰çŠ¶æ€çš„é€»è¾‘ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤ä¸»è¦æ˜¯ä¸ºäº†é‡ç”¨æ¶‰åŠæ™®é€šå…ƒç´ çš„åº•å±‚ DOM è®¿é—®çš„é€»è¾‘ã€‚</strong></p>
<h3 id="è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æŒ‡ä»¤" aria-hidden="true">#</a> è‡ªå®šä¹‰æŒ‡ä»¤</h3>
<blockquote>
<p>ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤**<code v-pre>ç”±ä¸€ä¸ªåŒ…å«ç±»ä¼¼ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­çš„å¯¹è±¡æ¥å®šä¹‰</code>**ã€‚<strong>é’©å­å‡½æ•°ä¼šæ¥æ”¶åˆ°æŒ‡ä»¤æ‰€ç»‘å®šå…ƒç´ ä½œä¸ºå…¶å‚æ•°</strong>ã€‚</p>
<p><strong><code v-pre>ä»»ä½•ä»¥ v å¼€å¤´çš„é©¼å³°å¼å‘½åçš„å˜é‡éƒ½å¯ä»¥è¢«ç”¨ä½œä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ã€‚</code></strong></p>
<p>åœ¨æ²¡æœ‰ä½¿ç”¨ <code v-pre>&lt;script setup&gt;</code> çš„æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤éœ€è¦é€šè¿‡ <code v-pre>directives</code> é€‰é¡¹æ³¨å†Œ</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å½“ä¸€ä¸ª input å…ƒç´ è¢« Vue æ’å…¥åˆ° DOM ä¸­åï¼Œå®ƒä¼šè¢«è‡ªåŠ¨èšç„¦</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">// åœ¨æ¨¡æ¿ä¸­å¯ç”¨ v-focusï¼Œæ— éœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå®šä¹‰éœ€è¦æ³¨å†Œçš„è‡ªå®šä¹‰æŒ‡ä»¤é’©å­å‡½æ•°ï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­å³å¯ä½¿ç”¨ğŸ“¦</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">const vFocus = {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  mounted: (el) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">el</span><span style="color: var(--shiki-token-function)">.focus</span><span style="color: var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">input</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">v-focus</span><span style="color: var(--shiki-color-text)"> /&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">vFocus</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åœ¨ç»‘å®šå…ƒç´ çš„ attribute å‰</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// æˆ–äº‹ä»¶ç›‘å¬å™¨åº”ç”¨å‰è°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">created</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ä¸‹é¢ä¼šä»‹ç»å„ä¸ªå‚æ•°çš„ç»†èŠ‚</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åœ¨å…ƒç´ è¢«æ’å…¥åˆ° DOM å‰è°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">beforeMount</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åŠä»–è‡ªå·±çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æŒ‚è½½å®Œæˆåè°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">mounted</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ›´æ–°å‰è°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">beforeUpdate</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// åŠä»–è‡ªå·±çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æ›´æ–°åè°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">updated</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½å‰è°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">beforeUnmount</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½åè°ƒç”¨</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">unmounted</span><span style="color: var(--shiki-color-text)">(el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> vnode</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> prevVnode) {}</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><code v-pre>el</code>ï¼šæŒ‡ä»¤ç»‘å®šåˆ°çš„å…ƒç´ ã€‚è¿™<strong>å¯ä»¥ç”¨äºç›´æ¥æ“ä½œ DOMã€‚</strong></li>
<li><code v-pre>binding</code>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ã€‚
<ul>
<li><code v-pre>value</code>ï¼š<strong>ä¼ é€’ç»™æŒ‡ä»¤çš„å€¼</strong>ã€‚ä¾‹å¦‚åœ¨ <code v-pre>v-my-directive=&quot;1 + 1&quot;</code> ä¸­ï¼Œå€¼æ˜¯ <code v-pre>2</code>ã€‚</li>
<li><code v-pre>oldValue</code>ï¼š<strong>ä¹‹å‰çš„å€¼ï¼Œä»…åœ¨ <code v-pre>beforeUpdate</code> å’Œ <code v-pre>updated</code> ä¸­å¯ç”¨</strong>ã€‚æ— è®ºå€¼æ˜¯å¦æ›´æ”¹ï¼Œå®ƒéƒ½å¯ç”¨ã€‚</li>
<li><code v-pre>arg</code>ï¼šä¼ é€’ç»™æŒ‡ä»¤çš„å‚æ•° (å¦‚æœæœ‰çš„è¯)ã€‚ä¾‹å¦‚åœ¨ <code v-pre>v-my-directive:foo</code> ä¸­ï¼Œå‚æ•°æ˜¯ <code v-pre>&quot;foo&quot;</code>ã€‚</li>
<li><code v-pre>modifiers</code>ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ (å¦‚æœæœ‰çš„è¯)ã€‚ä¾‹å¦‚åœ¨ <code v-pre>v-my-directive.foo.bar</code> ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡æ˜¯ <code v-pre>{ foo: true, bar: true }</code>ã€‚</li>
<li><code v-pre>instance</code>ï¼š<strong>ä½¿ç”¨è¯¥æŒ‡ä»¤çš„ç»„ä»¶å®ä¾‹ã€‚</strong></li>
<li><code v-pre>dir</code>ï¼šæŒ‡ä»¤çš„å®šä¹‰å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><code v-pre>vnode</code>ï¼š<strong>ä»£è¡¨ç»‘å®šå…ƒç´ çš„åº•å±‚ VNodeã€‚</strong></li>
<li><code v-pre>prevNode</code>ï¼š<strong>ä¹‹å‰çš„æ¸²æŸ“ä¸­ä»£è¡¨æŒ‡ä»¤æ‰€ç»‘å®šå…ƒç´ çš„ VNodeã€‚ä»…åœ¨ <code v-pre>beforeUpdate</code> å’Œ <code v-pre>updated</code> é’©å­ä¸­å¯ç”¨ã€‚</strong></li>
</ul>
<p><strong>å’Œå†…ç½®æŒ‡ä»¤ç±»ä¼¼ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤çš„å‚æ•°ä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„</strong>ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">v-example:[arg]</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;value&quot;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™é‡ŒæŒ‡ä»¤çš„å‚æ•°ä¼šåŸºäºç»„ä»¶çš„ <code v-pre>arg</code> æ•°æ®å±æ€§å“åº”å¼åœ°æ›´æ–°</p>
<h4 id="ç®€å†™ç‰ˆ-è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#ç®€å†™ç‰ˆ-è‡ªå®šä¹‰æŒ‡ä»¤" aria-hidden="true">#</a> ç®€å†™ç‰ˆ è‡ªå®šä¹‰æŒ‡ä»¤</h4>
<p>å¯¹äºè‡ªå®šä¹‰æŒ‡ä»¤æ¥è¯´ï¼Œä¸€ä¸ªå¾ˆå¸¸è§çš„æƒ…å†µæ˜¯<strong>ä»…ä»…éœ€è¦åœ¨ <code v-pre>mounted</code> å’Œ <code v-pre>updated</code> ä¸Šå®ç°ç›¸åŒçš„è¡Œä¸º</strong>ï¼Œé™¤æ­¤ä¹‹å¤–å¹¶ä¸éœ€è¦å…¶ä»–é’©å­ã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬<strong>å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥å®šä¹‰æŒ‡ä»¤</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">v-color</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&#39;color&#39;</span><span style="color: var(--shiki-color-text)">&gt;&lt;/</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)">&gt;;</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-token-function)">.directive</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;color&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (el</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> binding) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// è¿™ä¼šåœ¨ `mounted` å’Œ `updated` æ—¶éƒ½è°ƒç”¨ğŸ“¦</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)">el</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">style</span><span style="color: var(--shiki-color-text)">.color </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">binding</span><span style="color: var(--shiki-color-text)">.value;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šåªæœ‰å½“æ‰€éœ€åŠŸèƒ½åªèƒ½é€šè¿‡ç›´æ¥çš„ DOM æ“ä½œæ¥å®ç°æ—¶ï¼Œæ‰åº”è¯¥ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ã€‚å…¶ä»–æƒ…å†µä¸‹åº”è¯¥å°½å¯èƒ½åœ°ä½¿ç”¨ <code v-pre>v-bind</code> è¿™æ ·çš„å†…ç½®æŒ‡ä»¤æ¥å£°æ˜å¼åœ°ä½¿ç”¨æ¨¡æ¿ï¼Œè¿™æ ·æ›´é«˜æ•ˆ</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ç»„ä»¶å¯èƒ½å«æœ‰å¤šä¸ªæ ¹èŠ‚ç‚¹ã€‚å½“åº”ç”¨åˆ°ä¸€ä¸ªå¤šæ ¹ç»„ä»¶æ—¶ï¼ŒæŒ‡ä»¤å°†ä¼šè¢«å¿½ç•¥ä¸”æŠ›å‡ºä¸€ä¸ªè­¦å‘Šã€‚å’Œ attribute ä¸åŒï¼ŒæŒ‡ä»¤ä¸èƒ½é€šè¿‡ <code v-pre>v-bind=&quot;$attrs&quot;</code> æ¥ä¼ é€’ç»™ä¸€ä¸ªä¸åŒçš„å…ƒç´ ã€‚æ€»çš„æ¥è¯´ï¼Œ<strong>ä¸</strong>æ¨èåœ¨ç»„ä»¶ä¸Šä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>
<h3 id="æ’ä»¶-vue-use" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶-vue-use" aria-hidden="true">#</a> æ’ä»¶ Vue.use</h3>
<blockquote>
<p><strong>ä¸€ä¸ªæ’ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªæ‹¥æœ‰ <code v-pre>install()</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ˜¯ä¸€ä¸ªå®‰è£…å‡½æ•°æœ¬èº«</strong>ã€‚æ’ä»¶ (Plugins) æ˜¯ä¸€ç§èƒ½ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½çš„å·¥å…·ä»£ç ã€‚</p>
</blockquote>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// plugins/i18n.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">install</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> (app</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// åœ¨è¿™é‡Œç¼–å†™æ’ä»¶ä»£ç </span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªç¿»è¯‘å‡½æ•°ï¼Œ</span><span style="color: var(--shiki-token-constant)">è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªä»¥</span><span style="color: var(--shiki-color-text)"> . ä½œä¸ºåˆ†éš”ç¬¦çš„ key å­—ç¬¦ä¸²ï¼Œç”¨æ¥åœ¨ç”¨æˆ·æä¾›çš„ç¿»è¯‘å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”è¯­è¨€çš„æ–‡æœ¬ã€‚æœŸæœ›çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">h1</span><span style="color: var(--shiki-color-text)">&gt;{{ </span><span style="color: var(--shiki-token-function)">$translate</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;greetings.hello&#39;</span><span style="color: var(--shiki-color-text)">) }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">h1</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// plugins/i18n.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">install</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> (app</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// æ³¨å…¥ä¸€ä¸ªå…¨å±€å¯ç”¨çš„ $translate() æ–¹æ³•</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">app</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">config</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">globalProperties</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">$translate</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (key) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// è·å– `options` å¯¹è±¡çš„æ·±å±‚å±æ€§</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// ä½¿ç”¨ `key` ä½œä¸ºç´¢å¼•</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">key</span><span style="color: var(--shiki-token-function)">.split</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;.&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.reduce</span><span style="color: var(--shiki-color-text)">((o</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> i) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (o) </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> o[i];</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			}</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		};</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ts-æ‰©å±•å…¨å±€å±æ€§" tabindex="-1"><a class="header-anchor" href="#ts-æ‰©å±•å…¨å±€å±æ€§" aria-hidden="true">#</a> TS æ‰©å±•å…¨å±€å±æ€§</h3>
<p>æŸäº›æ’ä»¶ä¼šé€šè¿‡ <a href="https://staging-cn.vuejs.org/api/application.html#app-config-globalproperties" target="_blank" rel="noopener noreferrer"><code v-pre>app.config.globalProperties</code><ExternalLinkIcon/></a> ä¸ºæ‰€æœ‰ç»„ä»¶éƒ½å®‰è£…å…¨å±€å¯ç”¨çš„å±æ€§ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ºäº†è¯·æ±‚æ•°æ®è€Œå®‰è£…äº† <code v-pre>this.$http</code>ï¼Œæˆ–è€…ä¸ºäº†å›½é™…åŒ–è€Œå®‰è£…äº† <code v-pre>this.$translate</code>ã€‚ä¸ºäº†ä½¿ TypeScript æ›´å¥½åœ°æ”¯æŒè¿™ä¸ªè¡Œä¸ºï¼ŒVue æš´éœ²äº†ä¸€ä¸ªè¢«è®¾è®¡ä¸ºå¯ä»¥é€šè¿‡ <a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation" target="_blank" rel="noopener noreferrer">TypeScript æ¨¡å—æ‰©å±•<ExternalLinkIcon/></a>æ¥æ‰©å±•çš„ <code v-pre>ComponentCustomProperties</code> æ¥å£ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> axios </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;axios&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">declare</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">module</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">interface</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ComponentCustomProperties</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    $http</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">typeof</span><span style="color: var(--shiki-color-text)"> axios</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">$translate</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> (key</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">string</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">string</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  }</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transition-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#transition-ç»„ä»¶" aria-hidden="true">#</a> <code v-pre>&lt;Transition&gt;</code> ç»„ä»¶</h3>
<p>æ¡ä»¶ä¹‹ä¸€è§¦å‘ï¼š</p>
<ul>
<li>ç”± <code v-pre>v-if</code> æ‰€è§¦å‘çš„åˆ‡æ¢</li>
<li>ç”± <code v-pre>v-show</code> æ‰€è§¦å‘çš„åˆ‡æ¢</li>
<li>ç”±ç‰¹æ®Šå…ƒç´  <code v-pre>&lt;component&gt;</code> åˆ‡æ¢çš„åŠ¨æ€ç»„ä»¶</li>
</ul>
<p>å½“ä¸€ä¸ª <code v-pre>&lt;Transition&gt;</code> ç»„ä»¶ä¸­çš„å…ƒç´ è¢«æ’å…¥æˆ–ç§»é™¤æ—¶ï¼Œä¼šå‘ç”Ÿä¸‹é¢è¿™äº›äº‹æƒ…ï¼š</p>
<ol>
<li>Vue ä¼šè‡ªåŠ¨æ£€æµ‹ç›®æ ‡å…ƒç´ æ˜¯å¦åº”ç”¨äº† CSS è¿‡æ¸¡æˆ–åŠ¨ç”»ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä¸€äº› CSS è¿‡æ¸¡ class ä¼šåœ¨é€‚å½“çš„æ—¶æœºè¢«æ·»åŠ å’Œç§»é™¤ã€‚</li>
<li>å¦‚æœæœ‰ä½œä¸ºç›‘å¬å™¨çš„ JavaScript é’©å­ï¼Œè¿™äº›é’©å­å‡½æ•°ä¼šåœ¨é€‚å½“æ—¶æœºè¢«è°ƒç”¨ã€‚</li>
<li>å¦‚æœæ²¡æœ‰æ¢æµ‹åˆ° CSS è¿‡æ¸¡æˆ–åŠ¨ç”»ã€ä¹Ÿæ²¡æœ‰æä¾› JavaScript é’©å­ï¼Œé‚£ä¹ˆ DOM çš„æ’å…¥ã€åˆ é™¤æ“ä½œå°†åœ¨æµè§ˆå™¨çš„ä¸‹ä¸€ä¸ªåŠ¨ç”»å¸§åæ‰§è¡Œã€‚</li>
</ol>
<p><strong>JavaScript é’©å­</strong></p>
<p>ä½ å¯ä»¥é€šè¿‡ç›‘å¬ Transition ç»„ä»¶äº‹ä»¶çš„æ–¹å¼åœ¨è¿‡æ¸¡è¿‡ç¨‹ä¸­æŒ‚ä¸Šé’©å­å‡½æ•°</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">Transition</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @before-enter=&quot;onBeforeEnter&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @enter=&quot;onEnter&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @after-enter=&quot;onAfterEnter&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @enter-cancelled=&quot;onEnterCancelled&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @before-leave=&quot;onBeforeLeave&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @leave=&quot;onLeave&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @after-leave=&quot;onAfterLeave&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  @leave-cancelled=&quot;onLeaveCancelled&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;!-- ... --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-constant)">Transition</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”¨å“åº”å¼-api-åšç®€å•çŠ¶æ€ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ç”¨å“åº”å¼-api-åšç®€å•çŠ¶æ€ç®¡ç†" aria-hidden="true">#</a> ç”¨å“åº”å¼ API åšç®€å•çŠ¶æ€ç®¡ç†</h3>
<p>å¦‚æœä½ æœ‰ä¸€éƒ¨åˆ†çŠ¶æ€éœ€è¦åœ¨å¤šä¸ªç»„ä»¶å®ä¾‹é—´å…±äº«ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://staging-cn.vuejs.org/api/reactivity-core.html#reactive" target="_blank" rel="noopener noreferrer"><code v-pre>reactive()</code><ExternalLinkIcon/></a> æ¥åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå¹¶åœ¨ä¸åŒç»„ä»¶ä¸­å¯¼å…¥å®ƒï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// store.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { reactive } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">store</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">reactive</span><span style="color: var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  count</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">&lt;!--</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ComponentA</span><span style="color: var(--shiki-color-text)">.vue </span><span style="color: var(--shiki-token-keyword)">--&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { store } from &#39;./store.js&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;From A: {{ store.count }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">&lt;!--</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ComponentB</span><span style="color: var(--shiki-color-text)">.vue </span><span style="color: var(--shiki-token-keyword)">--&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">import { store } from &#39;./store.js&#39;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">script</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;From B: {{ store.count }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æ¯å½“ <code v-pre>store</code> å¯¹è±¡è¢«æ›´æ”¹æ—¶ï¼Œ<code v-pre>&lt;ComponentA&gt;</code> ä¸ <code v-pre>&lt;ComponentB&gt;</code> éƒ½ä¼šè‡ªåŠ¨æ›´æ–°å®ƒä»¬çš„è§†å›¾ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†å•ä¸€çš„æ•°æ®æºã€‚</p>
<p><strong>ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€ä»»æ„ä¸€ä¸ªå¯¼å…¥äº† <code v-pre>store</code> çš„ç»„ä»¶éƒ½å¯ä»¥éšæ„ä¿®æ”¹å®ƒçš„çŠ¶æ€</strong>ï¼š</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	&lt;</span><span style="color: var(--shiki-token-string-expression)">button</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">@click</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">&quot;store.count++&quot;</span><span style="color: var(--shiki-color-text)">&gt;From B: {{ store.count }}&lt;/</span><span style="color: var(--shiki-token-string-expression)">button</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">template</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶è¿™åœ¨ç®€å•çš„æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ï¼Œä½†ä»é•¿è¿œæ¥çœ‹ï¼Œå¯ä»¥è¢«ä»»ä½•ç»„ä»¶ä»»æ„æ”¹å˜çš„å…¨å±€çŠ¶æ€æ˜¯ä¸å¤ªå®¹æ˜“ç»´æŠ¤çš„ã€‚</p>
<h3 id="æ¨¡æ¿-vs-æ¸²æŸ“å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ¿-vs-æ¸²æŸ“å‡½æ•°" aria-hidden="true">#</a> æ¨¡æ¿ vs. æ¸²æŸ“å‡½æ•°</h3>
<p>Vue æ¨¡æ¿ä¼šè¢«é¢„ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚Vue ä¹Ÿæä¾›äº† API ä½¿æˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨æ¨¡æ¿ç¼–è¯‘ï¼Œç›´æ¥æ‰‹å†™æ¸²æŸ“å‡½æ•°ã€‚åœ¨å¤„ç†é«˜åº¦åŠ¨æ€çš„é€»è¾‘æ—¶ï¼Œæ¸²æŸ“å‡½æ•°ç›¸æ¯”äºæ¨¡æ¿æ›´åŠ çµæ´»ï¼Œå› ä¸ºä½ å¯ä»¥å®Œå…¨åœ°ä½¿ç”¨ JavaScript æ¥æ„é€ ä½ æƒ³è¦çš„ vnodeã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆ Vue é»˜è®¤æ¨èä½¿ç”¨æ¨¡æ¿å‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š</p>
<ol>
<li>æ¨¡æ¿æ›´è´´è¿‘å®é™…çš„ HTMLã€‚è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°é‡ç”¨ä¸€äº›å·²æœ‰çš„ HTML ä»£ç ç‰‡æ®µï¼Œèƒ½å¤Ÿå¸¦æ¥æ›´å¥½çš„å¯è®¿é—®æ€§ä½“éªŒã€èƒ½æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ CSS åº”ç”¨æ ·å¼ï¼Œå¹¶ä¸”æ›´å®¹æ˜“ä½¿è®¾è®¡å¸ˆç†è§£å’Œä¿®æ”¹ã€‚</li>
<li>ç”±äºå…¶ç¡®å®šçš„è¯­æ³•ï¼Œæ›´å®¹æ˜“å¯¹æ¨¡æ¿åšé™æ€åˆ†æã€‚è¿™ä½¿å¾— Vue çš„æ¨¡æ¿ç¼–è¯‘å™¨èƒ½å¤Ÿåº”ç”¨è®¸å¤šç¼–è¯‘æ—¶ä¼˜åŒ–æ¥æå‡è™šæ‹Ÿ DOM çš„æ€§èƒ½è¡¨ç° (ä¸‹é¢æˆ‘ä»¬å°†å±•å¼€è®¨è®º)ã€‚</li>
</ol>
<p>åœ¨å®è·µä¸­ï¼Œæ¨¡æ¿å¯¹å¤§å¤šæ•°çš„åº”ç”¨åœºæ™¯éƒ½æ˜¯å¤Ÿç”¨ä¸”é«˜æ•ˆçš„ã€‚<strong>æ¸²æŸ“å‡½æ•°ä¸€èˆ¬åªä¼šåœ¨éœ€è¦å¤„ç†é«˜åº¦åŠ¨æ€æ¸²æŸ“é€»è¾‘çš„å¯é‡ç”¨ç»„ä»¶ä¸­ä½¿ç”¨</strong>ã€‚æƒ³äº†è§£æ¸²æŸ“å‡½æ•°çš„æ›´å¤šä½¿ç”¨ç»†èŠ‚å¯ä»¥å»åˆ°<a href="https://staging-cn.vuejs.org/guide/extras/render-function.html" target="_blank" rel="noopener noreferrer">æ¸²æŸ“å‡½æ•° &amp; JSX<ExternalLinkIcon/></a> ç« èŠ‚ç»§ç»­é˜…è¯»ã€‚</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// é™¤äº†ç±»å‹å¿…å¡«ä»¥å¤–ï¼Œå…¶ä»–çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { id</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// attribute å’Œ property éƒ½èƒ½åœ¨ prop ä¸­ä¹¦å†™</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// Vue ä¼šè‡ªåŠ¨å°†å®ƒä»¬åˆ†é…åˆ°æ­£ç¡®çš„ä½ç½®</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { class</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;bar&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> innerHTML</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// å¯ä»¥æ·»åŠ  .prop å’Œ .attr ç­‰é“å…·ä¿®é¥°ç¬¦</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// with &#39;.&#39; and `^&#39; prefixes respectivelyğŸ“¦</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-string-expression)">&#39;.name&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;some-name&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;^width&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;100&#39;</span><span style="color: var(--shiki-color-text)"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ç±»ä¸æ ·å¼å¯ä»¥åƒåœ¨æ¨¡æ¿ä¸­ä¸€æ ·</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ç”¨æ•°ç»„æˆ–å¯¹è±¡çš„å½¢å¼ä¹¦å†™</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { class</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [foo</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { bar }]</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> style</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> { color</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;red&#39;</span><span style="color: var(--shiki-color-text)"> } });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// äº‹ä»¶ç›‘å¬å™¨åº”ä»¥ onXxx çš„å½¢å¼ä¹¦å†™</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-function)">onClick</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {} });</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// children å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { id</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)"> }</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// æ²¡æœ‰ props æ—¶å¯ä»¥çœç•¥ä¸å†™</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;span&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">)]);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// children æ•°ç»„å¯ä»¥åŒæ—¶åŒ…å« vnodes ä¸å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;span&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">)]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾—åˆ°çš„ vnode ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">vnode</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { id</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)"> }</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> []);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-constant)">vnode</span><span style="color: var(--shiki-color-text)">.type; </span><span style="color: var(--shiki-token-comment)">// &#39;div&#39;</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">vnode</span><span style="color: var(--shiki-color-text)">.props; </span><span style="color: var(--shiki-token-comment)">// { id: &#39;foo&#39; }</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">vnode</span><span style="color: var(--shiki-color-text)">.children; </span><span style="color: var(--shiki-token-comment)">// []</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">vnode</span><span style="color: var(--shiki-color-text)">.key; </span><span style="color: var(--shiki-token-comment)">// null</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç»„åˆå¼ API ä¸æ¨¡æ¿ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ<code v-pre>setup()</code> é’©å­çš„è¿”å›å€¼æ˜¯ç”¨äºæš´éœ²æ•°æ®ç»™æ¨¡æ¿ã€‚ç„¶è€Œå½“æˆ‘ä»¬ä½¿ç”¨æ¸²æŸ“å‡½æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥æŠŠæ¸²æŸ“å‡½æ•°è¿”å›ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { ref</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> h } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	props</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">/* ... */</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">(props) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ref</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// è¿”å›æ¸²æŸ“å‡½æ•°</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)">.msg </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">count</span><span style="color: var(--shiki-color-text)">.value);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code v-pre>setup()</code> å†…éƒ¨å£°æ˜çš„æ¸²æŸ“å‡½æ•°å¤©ç”Ÿèƒ½å¤Ÿè®¿é—®åœ¨åŒä¸€èŒƒå›´å†…å£°æ˜çš„ props å’Œè®¸å¤šå“åº”å¼çŠ¶æ€ã€‚</p>
<h4 id="vnodes-å¿…é¡»å”¯ä¸€" tabindex="-1"><a class="header-anchor" href="#vnodes-å¿…é¡»å”¯ä¸€" aria-hidden="true">#</a> Vnodes å¿…é¡»å”¯ä¸€</h4>
<p><strong><code v-pre>ç»„ä»¶æ ‘ä¸­çš„ vnodes å¿…é¡»æ˜¯å”¯ä¸€çš„</code></strong>ã€‚ä¸‹é¢æ˜¯é”™è¯¯ç¤ºèŒƒï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">render</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">p</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;p&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hi&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// å•Šå“¦ï¼Œé‡å¤çš„ vnodes æ˜¯æ— æ•ˆçš„</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		p</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		p</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	]);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ çœŸçš„éå¸¸æƒ³åœ¨é¡µé¢ä¸Šæ¸²æŸ“å¤šä¸ªé‡å¤çš„å…ƒç´ æˆ–è€…ç»„ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å‚å‡½æ•°æ¥åšè¿™ä»¶äº‹ã€‚æ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªæ¸²æŸ“å‡½æ•°å°±å¯ä»¥å®Œç¾æ¸²æŸ“å‡º 20 ä¸ªç›¸åŒçš„æ®µè½ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">render</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-constant)">Array</span><span style="color: var(--shiki-token-function)">.from</span><span style="color: var(--shiki-color-text)">({ length</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">20</span><span style="color: var(--shiki-color-text)"> })</span><span style="color: var(--shiki-token-function)">.map</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;p&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hi&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		})</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¼ é€’æ’æ§½" tabindex="-1"><a class="header-anchor" href="#ä¼ é€’æ’æ§½" aria-hidden="true">#</a> ä¼ é€’æ’æ§½</h4>
<p>å‘ç»„ä»¶ä¼ é€’å­å…ƒç´ çš„æ–¹å¼ä¸å‘å…ƒç´ ä¼ é€’å­å…ƒç´ çš„æ–¹å¼æœ‰äº›è®¸ä¸åŒã€‚æˆ‘ä»¬éœ€è¦ä¼ é€’ä¸€ä¸ªæ’æ§½å‡½æ•°æˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å«æ’æ§½å‡½æ•°çš„å¯¹è±¡è€Œéæ˜¯æ•°ç»„ï¼Œæ’æ§½å‡½æ•°çš„è¿”å›å€¼åŒä¸€ä¸ªæ­£å¸¸çš„æ¸²æŸ“å‡½æ•°çš„è¿”å›å€¼ä¸€æ ·â€”â€”å¹¶ä¸”åœ¨å­ç»„ä»¶ä¸­è¢«è®¿é—®æ—¶æ€»æ˜¯ä¼šè¢«è½¬åŒ–ä¸ºä¸€ä¸ª vnodes æ•°ç»„ã€‚</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// å•ä¸ªé»˜è®¤æ’æ§½</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(MyComponent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// å…·åæ’æ§½</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// æ³¨æ„ `null` æ˜¯å¿…éœ€çš„</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ä»¥é¿å… slot å¯¹è±¡è¢«å½“æˆ prop å¤„ç†ğŸ“¦</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(MyComponent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">default</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;default slot&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">foo</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;div&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">bar</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;span&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;one&#39;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;span&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;two&#39;</span><span style="color: var(--shiki-color-text)">)]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç­‰ä»· JSX è¯­æ³•ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// é»˜è®¤æ’æ§½</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">MyComponent</span><span style="color: var(--shiki-color-text)">&gt;{() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;hello&#39;</span><span style="color: var(--shiki-color-text)">}&lt;/</span><span style="color: var(--shiki-token-constant)">MyComponent</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// å…·åæ’æ§½</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-constant)">MyComponent</span><span style="color: var(--shiki-color-text)">&gt;{{</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">default</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;default slot&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">foo</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &lt;</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)">&gt;foo&lt;/</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)">&gt;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">bar</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> [&lt;</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;one&lt;/</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &lt;</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;two&lt;/</span><span style="color: var(--shiki-token-string-expression)">span</span><span style="color: var(--shiki-color-text)">&gt;]</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">}}&lt;/</span><span style="color: var(--shiki-token-constant)">MyComponent</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’æ§½ä»¥å‡½æ•°çš„å½¢å¼ä¼ é€’ä½¿å¾—å®ƒä»¬å¯ä»¥è¢«å­ç»„ä»¶æ‡’è°ƒç”¨ã€‚è¿™èƒ½ç¡®ä¿å®ƒè¢«æ³¨å†Œä¸ºå­ç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œè€Œä¸æ˜¯çˆ¶ç»„ä»¶ã€‚è¿™ä½¿å¾—æ›´æ–°æ›´åŠ å‡†ç¡®åŠæœ‰æ•ˆã€‚</p>
<h4 id="å†…ç½®ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å†…ç½®ç»„ä»¶" aria-hidden="true">#</a> å†…ç½®ç»„ä»¶</h4>
<p>è¯¸å¦‚ <code v-pre>&lt;KeepAlive&gt;</code>ã€<code v-pre>&lt;Transition&gt;</code>ã€<code v-pre>&lt;TransitionGroup&gt;</code>ã€<code v-pre>&lt;Teleport&gt;</code> å’Œ <code v-pre>&lt;Suspense&gt;</code> ç­‰<a href="https://staging-cn.vuejs.org/api/built-in-components.html" target="_blank" rel="noopener noreferrer">å†…ç½®ç»„ä»¶<ExternalLinkIcon/></a>åœ¨æ¸²æŸ“å‡½æ•°ä¸­å¿…é¡»å¯¼å…¥æ‰èƒ½ä½¿ç”¨ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { h</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> KeepAlive</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> Teleport</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> Transition</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> TransitionGroup } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;vue&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(Transition</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { mode</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;out-in&#39;</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-comment)">/* ... */</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="v-model" tabindex="-1"><a class="header-anchor" href="#v-model" aria-hidden="true">#</a> <code v-pre>v-model</code></h4>
<p><code v-pre>v-model</code> æŒ‡ä»¤æ‰©å±•ä¸º <code v-pre>modelValue</code> å’Œ <code v-pre>onUpdate:modelValue</code> åœ¨æ¨¡æ¿ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±æä¾›è¿™äº› propsï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	props</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;modelValue&#39;</span><span style="color: var(--shiki-color-text)">]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	emits</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;update:modelValue&#39;</span><span style="color: var(--shiki-color-text)">]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-function)">setup</span><span style="color: var(--shiki-color-text)">(props</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> { emit }) {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-function)">h</span><span style="color: var(--shiki-color-text)">(SomeComponent</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">				modelValue</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">props</span><span style="color: var(--shiki-color-text)">.modelValue</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-string-expression)">&#39;onUpdate:modelValue&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> (value) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">					</span><span style="color: var(--shiki-token-function)">emit</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;update:modelValue&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> value)</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">			});</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å–æ¶ˆ-native-ä¿®é¥°ç¬¦" tabindex="-1"><a class="header-anchor" href="#å–æ¶ˆ-native-ä¿®é¥°ç¬¦" aria-hidden="true">#</a> å–æ¶ˆ <code v-pre>.native</code> ä¿®é¥°ç¬¦</h3>
<p><code v-pre>.native</code> ä¿®é¥°ç¬¦åœ¨ Vue 3 å·²ç»ç§»é™¤æ‰ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œåœ¨æ–°å¢çš„ <code v-pre>emits</code> é€‰é¡¹ä¸­å®šä¹‰å½“å‰ç»„ä»¶çœŸæ­£è§¦å‘çš„äº‹ä»¶ï¼ˆå³ï¼Œç»„ä»¶äº‹ä»¶ï¼‰ï¼Œå°†æ‰€æœ‰<strong>æœªåœ¨ç»„ä»¶<code v-pre>emits</code> é€‰é¡¹ä¸­å®šä¹‰</strong>çš„äº‹ä»¶<strong>ä½œä¸ºåŸç”Ÿäº‹ä»¶æ·»åŠ åˆ°å­ç»„ä»¶çš„æ ¹å…ƒç´ </strong>ä¸­ï¼ˆé™¤éå­ç»„ä»¶é€‰é¡¹ä¸­è®¾ç½®äº† <code v-pre>inheritAttrs: false</code>ï¼‰ã€‚</p>
</div></template>
