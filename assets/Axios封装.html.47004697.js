import{_ as s,o as n,c as o,a}from"./app.15ce62dc.js";const e={},l=a(`<h1 id="\u{1F4D6}-\u57FA\u4E8E-typescript-\u4E8C\u6B21\u5C01\u88C5-axios" tabindex="-1"><a class="header-anchor" href="#\u{1F4D6}-\u57FA\u4E8E-typescript-\u4E8C\u6B21\u5C01\u88C5-axios" aria-hidden="true">#</a> \u{1F4D6} \u57FA\u4E8E typescript \u4E8C\u6B21\u5C01\u88C5 axios</h1><blockquote><p>\u5BF9 axios \u4E8C\u6B21\u5C01\u88C5,\u66F4\u52A0\u7684\u53EF\u914D\u7F6E\u5316\u3001\u6269\u5C55\u6027\u66F4\u52A0\u5F3A\u5927\u7075\u6D3B</p><p>\u901A\u8FC7 class \u7C7B\u5B9E\u73B0\uFF0Cclass \u5177\u5907\u66F4\u5F3A\u5C01\u88C5\u6027(<code>\u5C01\u88C5\u3001\u7EE7\u627F\u3001\u591A\u6001</code>)\uFF0C\u901A\u8FC7\u5B9E\u4F8B\u5316\u7C7B\u4F20\u5165\u81EA\u5B9A\u4E49\u7684\u914D\u7F6E</p></blockquote><h3 id="\u521B\u5EFA-class" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-class" aria-hidden="true">#</a> \u521B\u5EFA class</h3><p>\u4E25\u683C\u8981\u6C42\u5B9E\u4F8B\u5316\u65F6\u4F20\u5165\u7684\u914D\u7F6E\uFF0C\u62E5\u6709\u66F4\u597D\u7684\u4EE3\u7801\u63D0\u793A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{AxiosInstance}</span><span style="color:var(--shiki-token-comment);"> axios\u5B9E\u4F8B\u7C7B\u578B</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{AxiosRequestConfig}</span><span style="color:var(--shiki-token-comment);"> axios\u914D\u7F6E\u9879\u7C7B\u578B</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> { AxiosInstance</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> AxiosRequestConfig } </span><span style="color:var(--shiki-token-keyword);">from</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;axios&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    axios</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosInstance</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">constructor</span><span style="color:var(--shiki-color-text);">(config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B axios.create([config])</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.axios </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.create</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u6BCF\u5B9E\u4F8B\u5316\u4E00\u4E2A axios \u65F6\uFF0C\u90FD\u662F\u4E0D\u540C\u7684 axios \u793A\u4F8B\uFF0C\u4E92\u4E0D\u5E72\u6270</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    baseURL</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-token-string-expression);">&#39;qq.com&#39;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    timeout:</span><span style="color:var(--shiki-token-constant);">60</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    baseURL</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-token-string-expression);">&#39;web.com&#39;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><h5 id="axios-create-config" tabindex="-1"><a class="header-anchor" href="#axios-create-config" aria-hidden="true">#</a> axios.create([config])</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">instance</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.create</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  baseURL</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;https://some-domain.com/api/&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  timeout</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1000</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  headers</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> {</span><span style="color:var(--shiki-token-string-expression);">&#39;X-Custom-Header&#39;</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;foobar&#39;</span><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><strong>AxiosRequestConfig \u7684\u7C7B\u578B\u6CE8\u89E3</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">export</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">D</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  url</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  method</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Method</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  baseURL</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  transformRequest</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestTransformer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestTransformer</span><span style="color:var(--shiki-color-text);">[];</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  transformResponse</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponseTransformer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponseTransformer</span><span style="color:var(--shiki-color-text);">[];</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  headers</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestHeaders</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  params</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">paramsSerializer</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> (params</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  data</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">D</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  timeout</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  timeoutErrorMessage</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  withCredentials</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">boolean</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  adapter</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosAdapter</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  auth</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosBasicCredentials</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  responseType</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">ResponseType</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  responseEncoding</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">responseEncoding</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  xsrfCookieName</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  xsrfHeaderName</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">onUploadProgress</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> (progressEvent</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">void</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">onDownloadProgress</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> (progressEvent</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">void</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  maxContentLength</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  validateStatus</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> ((status</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">boolean</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">null</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  maxBodyLength</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  maxRedirects</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  </span><span style="color:var(--shiki-token-function);">beforeRedirect</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> (options</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Record</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">&gt;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> responseDetails</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> {headers</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Record</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">&gt;}) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">void</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  socketPath</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">null</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  httpAgent</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  httpsAgent</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  proxy</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosProxyConfig</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  cancelToken</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">CancelToken</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  decompress</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">boolean</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  transitional</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TransitionalOptions</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  signal</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AbortSignal</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  insecureHTTPParser</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">boolean</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  env</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    FormData</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-color-text);">args</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">[]) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">object</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">  };</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5C01\u88C5-request-config-\u901A\u7528\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-request-config-\u901A\u7528\u65B9\u6CD5" aria-hidden="true">#</a> \u5C01\u88C5 request(config)\u901A\u7528\u65B9\u6CD5</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* axios#request(config)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{*}</span><span style="color:var(--shiki-token-comment);"> config</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@returns</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{*}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">request</span><span style="color:var(--shiki-color-text);">(config: AxiosRequestConfig) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u{1F3F9} <strong>\u5728 axios \u4E2D\uFF0Crequest\u4E2D\u7684 config \u53C2\u6570\u4E0E\u5B9E\u4F8B\u5316\u65F6\uFF0C<code>axios.create(config)</code>\u4F20\u5165\u7684\u53C2\u6570\u662F\u76F8\u540C\u7684</strong>\uFF0C\u4EE5\u4E0B\u662F axios \u65B9\u6CD5\u5177\u4F53\u53C2\u6570</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.delete</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.head</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.options</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.post</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> data[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config]])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.put</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> data[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config]])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.patch</span><span style="color:var(--shiki-color-text);">(url[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> data[</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> config]])</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.getUri</span><span style="color:var(--shiki-color-text);">([config])</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="\u5C01\u88C5-\u62E6\u622A\u5668-\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-\u62E6\u622A\u5668-\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB" aria-hidden="true">#</a> \u5C01\u88C5-\u62E6\u622A\u5668(\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB)</h3><p><strong>\u62E6\u622A\u5668\u7684hooks,\u5728\u8BF7\u6C42\u6216\u54CD\u5E94\u88AB then \u6216 catch \u5904\u7406\u524D\u62E6\u622A\u5904\u7406</strong></p><blockquote><p>\u{1F6F9}\u5728\u8BF7\u6C42\u4E2D\uFF0C\u5982<code>\u643A\u5E26token\u3001loading\u52A8\u753B\u3001header\u914D\u7F6E...</code>\uFF0C\u90FD\u662F\u4E00\u4E9B\u516C\u6709\u7684\u903B\u8F91\uFF0C\u6240\u4EE5\u53EF\u4EE5\u5199\u5230\u5168\u5C40\u7684\u62E6\u622A\u5668\u91CC\u9762</p><p>\u{1F6F5}\u6CE8\u610F\u7684\u662F\uFF0C\u53EF\u80FD\u5B58\u5728\u67D0\u4E9B\u9879\u76EE\u8BF7\u6C42\uFF0C\u9700\u8981\u7684\u516C\u6709\u7684\u903B\u8F91\u914D\u7F6E\u65B9\u5F0F\u4E0D\u4E00\u6837\uFF0C\u5982 A\u9879\u76EE\uFF1A<code>\u643A\u5E26token\u3001loading\u52A8\u753B</code>,B\u9879\u76EE\uFF1A<code>\u643A\u5E26token\u3001header\u914D\u7F6E</code></p><p>\u{1FA82}\u8003\u8651\u5230\u62E6\u622A\u65B9\u5F0F\u4E0D\u4E00\u6837\uFF0C\u56FA\u4E0D\u80FD\u5C06 class \u91CC\u7684\u62E6\u622A\u5668\u5199si\uFF0C\u6240\u4EE5\uFF0C\u9700\u8981\u901A\u8FC7\u4E0D\u540C\u7684 axios \u5B9E\u4F8B\u5316\u4F20\u5165\u81EA\u5B9A\u4E49\u7684 <code>hooks(\u62E6\u622A\u5668)</code>\uFF0C<strong>\u5B9E\u73B0\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB</strong>\uFF0C\u6269\u5C55\u6027\u66F4\u5F3A</p></blockquote><p>\u5728\u4E0A\u9762<code>\u5B9E\u4F8B\u5316 Http(Axios) \u65F6</code>\uFF0C\u4EC5\u4EC5\u4F20\u5165 axios \u7EA6\u5B9A\u597D\u7684 <code>config(AxiosRequestConfig)</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    baseURL</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-token-string-expression);">&#39;qq.com&#39;</span><span style="color:var(--shiki-color-text);">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    timeout:</span><span style="color:var(--shiki-token-constant);">60</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ECF\u8FC7\u5206\u6790\u8003\u8651\uFF0C\u9700\u8981\u5728\u5B9E\u4F8B\u5316 Http \u65F6\uFF0C\u53EF\u4EE5\u4F20\u5165\u66F4\u591A\u81EA\u5B9A\u4E49\u7684 hooks\uFF0C\u6269\u5C55 axios\u3002\u4F46\u662F\uFF0C<strong>\u5728\u5B9E\u4F8B\u5316\u65F6\uFF0C\u76F4\u63A5\u4F20\u5165\u5B9A\u4E49\u597D\u7684\u62E6\u622A\u5668\u662F\u4E0D\u53EF\u884C\u7684 <code>Why?</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    baseURL</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;qq.com&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    timeout</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">60</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    hooks</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> {}</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// ERROR \u274C\u274C\u2B55\u2B55</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">interceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> () </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {} </span><span style="color:var(--shiki-token-comment);">// ERROR \u2B55\u2B55\u274C\u274C</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>\u201Chooks\u201D\u4E0D\u5728\u7C7B\u578B\u201CAxiosRequestConfig&lt;any&gt;\u201D\u4E2D</code>\uFF0C\u5728\u4E0A\u9762 Http class \u7684 constructor \u6784\u9020\u51FD\u6570\u4E2D\uFF0C\u4E25\u683C\u7EA6\u675F\u4F20\u5165\u7684\u53C2\u6570\u5E94\u4E3A<code>AxiosRequestConfig</code>\u7C7B\u578B(TS)</p><p>AxiosRequestConfig \u4E2D\u5E76\u4E0D\u5B58\u5728 <code>hooks and interceptor</code>\u7C7B\u578B\u7684\u5C5E\u6027(AxiosRequestConfig \u662F\u7531 axios \u63D0\u4F9B\u7684\u4E00\u4E2A\u7C7B\u578B\u6CE8\u89E3)</p></blockquote><h4 id="\u{1F680}\u6269\u5C55-http-\u81EA\u5B9A\u4E49\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#\u{1F680}\u6269\u5C55-http-\u81EA\u5B9A\u4E49\u62E6\u622A\u5668" aria-hidden="true">#</a> <strong>\u{1F680}\u6269\u5C55 Http \u81EA\u5B9A\u4E49\u62E6\u622A\u5668</strong></h4><p>\u5BF9 <code>AxiosRequestConfig</code> \u7C7B\u578B\u6CE8\u89E3<strong>\u8FDB\u884C\u7EE7\u627F</strong>\uFF0C\u4F7F\u5F97\u5728\u5B9E\u4F8B\u5316\u65F6\uFF0C\u53EF\u4EE5\u4F20\u5165\u6269\u5C55\u540E\u7684\u7C7B\u578B\uFF0C\u5B9A\u4E49\uFF1A</p><p>\u{1F3DC}\uFE0F<code>IinterceptorHooks</code>\u63A5\u53E3\u5B58\u50A8\u81EA\u5B9A\u4E49\u7684\u62E6\u622A\u5668\u51FD\u6570\u3001</p><p>\u{1F3D9}\uFE0F<code>IHttpRequestConfig</code>\u63A5\u53E3\u7EE7\u627F AxiosRequestConfig\uFF0C\u5E76\u6269\u5C55\u81EA\u5B9A\u4E49\u62E6\u622A\u5668\u7684\u5C5E\u6027\uFF0C\u5C5E\u6027\u7C7B\u578B\u4E3A\uFF1AIinterceptorHooks</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-color-text);">\u{1F3DC}\uFE0F</span><span style="color:var(--shiki-token-string-expression);">\`IinterceptorHooks\`</span><span style="color:var(--shiki-color-text);">\u62E6\u622A\u5668Hook\u63A5\u53E3\u7C7B\u578B</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> { AxiosResponse</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> AxiosRequestConfig } </span><span style="color:var(--shiki-token-keyword);">from</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;axios&#39;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * \u62E6\u622A\u5668\u7684hooks,\u5728\u8BF7\u6C42\u6216\u54CD\u5E94\u88AB then \u6216 catch \u5904\u7406\u524D\u62E6\u622A</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{beforeRequestInterceptor(?)}</span><span style="color:var(--shiki-token-comment);"> \u53D1\u9001\u8BF7\u6C42\u4E4B\u524D\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{requestErrorInterceptor(?)}</span><span style="color:var(--shiki-token-comment);"> \u8BF7\u6C42\u9519\u8BEF\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{responseSuccessInterceptor(?)}</span><span style="color:var(--shiki-token-comment);"> \u54CD\u5E94\u6210\u529F\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{responseFailInterceptor(?)}</span><span style="color:var(--shiki-token-comment);"> \u54CD\u5E94\u5931\u8D25\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">interceptorHooks</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">beforeRequestInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">requestErrorInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (error</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">responseSuccessInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (result</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponse</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponse</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">responseFailInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (error</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">export</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IinterceptorHooks</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Partial</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">interceptorHooks</span><span style="color:var(--shiki-color-text);">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u{1F30F}<strong>Partial</strong>:Typescript \u5185\u7F6E\u7C7B\u578B\uFF0C<strong>\u5C06\u5B9A\u4E49\u7684\u7C7B\u578B\u6CE8\u89E3\u5168\u90E8\u53D8\u4E3A\u53EF\u9009\u7684\u5C5E\u6027</strong></p><p>\u{1FA82}<strong>\u8C03\u7528\u8BF4\u660E</strong>\uFF1A<code> axios.interceptors.request.use( beforeRequestInterceptor , requestErrorInterceptor );</code></p></blockquote><blockquote><p>\u8BF7\u6C42\u4E4B\u524D\u62E6\u622A\u5668\u4E2D(beforeRequestInterceptor)\uFF0Cconfig \u53C2\u6570\u540C\u6837\u662F\u4E0E<code>axios.create</code>\u4E2D\u7684\u53C2\u6570\u7C7B\u578B\u76F8\u540C\uFF0C\u4E3A<code>AxiosRequestConfig</code></p><p>\u6CE8\u610F\uFF1A\u5E76\u4E0D\u662F<code>IHttpRequestConfig</code></p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-color-text);">\u{1F3D9}\uFE0F</span><span style="color:var(--shiki-token-string-expression);">\`IHttpRequestConfig\`</span><span style="color:var(--shiki-color-text);"> \u7C7B\u6784\u9020\u51FD\u6570 config \u63A5\u53E3\u7C7B\u578B</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * \u5B9E\u4F8B\u5316Http\u7C7B\u7684\u914D\u7F6E\u9879\u53C2\u6570,\u7EE7\u627F\u4E8EAxiosRequestConfig</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{interceptors(?)}</span><span style="color:var(--shiki-token-comment);"> \u62E6\u622A\u5668Hooks</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{loading}</span><span style="color:var(--shiki-token-comment);"> \u8BF7\u6C42loading</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{...}</span><span style="color:var(--shiki-token-comment);"> \u5176\u5B83\u7684\u914D\u7F6E\u9879</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> * </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{AxiosRequestConfig}</span><span style="color:var(--shiki-token-comment);"> axios\u539F\u751F\u7684\u914D\u7F6E\u9009</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">export</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IHttpRequestConfig</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">extends</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    interceptors</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IinterceptorHooks</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u{1F6F5}<strong>\u4F7F\u7528\u8BF4\u660E</strong>\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> { IHttpRequestConfig</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> IinterceptorHooks } </span><span style="color:var(--shiki-token-keyword);">from</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;./types&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    axios</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosInstance</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    interceptors</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IinterceptorHooks</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">constructor</span><span style="color:var(--shiki-color-text);">(config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IHttpRequestConfig</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u89E3\u6784\u81EA\u5B9A\u4E49\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> { </span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">...</span><span style="color:var(--shiki-token-constant);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);"> } </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.axios </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.create</span><span style="color:var(--shiki-color-text);">(AxiosRequestConfig)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u5B58\u50A8\u81EA\u5B9A\u4E49\u62E6\u622AHooks or \u76F4\u63A5 use() \u4F7F\u7528</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.interceptors </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> interceptors</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u4F20\u5165\u81EA\u5B9A\u4E49\u8BF7\u6C42\u62E6\u622A\u5668Hooks</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">request</span><span style="color:var(--shiki-token-function);">.use</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.beforeRequestInterceptor</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.requestErrorInterceptor</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        )</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u4F20\u5165\u81EA\u5B9A\u4E49\u54CD\u5E94\u62E6\u622A\u5668Hooks</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">response</span><span style="color:var(--shiki-token-function);">.use</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.responseSuccessInterceptor</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.responseFailInterceptor</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        )</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u6269\u5C55\u540E\u7684\u5B9E\u4F8B\u5316...\u26F5</span></span>
<span class="line"><span style="color:var(--shiki-color-text);"> interceptors</span><span style="color:var(--shiki-token-punctuation);">:</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     </span><span style="color:var(--shiki-token-comment);">// ... \u81EA\u5B9A\u4E49\u7684\u62E6\u622AHooks</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     beforeRequestInterceptor</span><span style="color:var(--shiki-token-punctuation);">:</span><span style="color:var(--shiki-color-text);"> (config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IHttpRequestConfig</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">token</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">localStorage</span><span style="color:var(--shiki-token-function);">.getItem</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&#39;token&#39;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (token </span><span style="color:var(--shiki-token-keyword);">&amp;&amp;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-color-text);">.headers) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">             </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">headers</span><span style="color:var(--shiki-color-text);">.Authorization </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> token</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5C01\u88C5-\u62E6\u622A\u5668-\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-\u62E6\u622A\u5668-\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB" aria-hidden="true">#</a> \u5C01\u88C5-\u62E6\u622A\u5668(\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB)</h3><blockquote><p>\u65E0\u8BBA\u5B58\u5728\u591A\u5C11\u4E2A\u5B9E\u4F8B\u7684 Http\uFF0C\u6240\u6709\u5B9E\u4F8B\u90FD\u4F1A\u5171\u4EAB\u7684\u540C\u4E00\u5957\u62E6\u622A\u5668\uFF0C\u5728 class \u4E2D\u56FA\u5B9A\u7684</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Http</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    axios</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosInstance</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-comment);">// ...</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">constructor</span><span style="color:var(--shiki-color-text);">(config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IHttpRequestConfig</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// ...\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u62E6\u622A\u5668\u5904\u7406\u{1F373}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u7684\u62E6\u622A-\u8BF7\u6C42\u62E6\u622A\u5668\u{1F35F}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">request</span><span style="color:var(--shiki-token-function);">.use</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (config) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u5728\u53D1\u9001\u8BF7\u6C42\u4E4B\u524D\u505A\u4E9B\u4EC0\u4E48</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            }</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (error) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u8BF7\u6C42\u9519\u8BEF\u505A\u4E9B\u4EC0\u4E48</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Promise</span><span style="color:var(--shiki-token-function);">.reject</span><span style="color:var(--shiki-color-text);">(error)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        )</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u7684\u62E6\u622A-\u54CD\u5E94\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">response</span><span style="color:var(--shiki-token-function);">.use</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (response) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// 2xx \u8303\u56F4\u5185\u7684\u72B6\u6001\u7801\u90FD\u4F1A\u89E6\u53D1\u8BE5\u51FD\u6570\u3002</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u54CD\u5E94\u6570\u636E\u505A\u70B9\u4EC0\u4E48</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> response</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            }</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (error) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u8D85\u51FA 2xx \u8303\u56F4\u7684\u72B6\u6001\u7801\u90FD\u4F1A\u89E6\u53D1\u8BE5\u51FD\u6570\u3002</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u54CD\u5E94\u9519\u8BEF\u505A\u70B9\u4EC0\u4E48</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Promise</span><span style="color:var(--shiki-token-function);">.reject</span><span style="color:var(--shiki-color-text);">(error)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        )</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5C01\u88C5-\u62E6\u622A\u5668-\u5355\u4E2A\u8BF7\u6C42\u72EC\u4EAB" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-\u62E6\u622A\u5668-\u5355\u4E2A\u8BF7\u6C42\u72EC\u4EAB" aria-hidden="true">#</a> \u5C01\u88C5-\u62E6\u622A\u5668(\u5355\u4E2A\u8BF7\u6C42\u72EC\u4EAB)</h3><blockquote><p>\u5728 axios \u539F\u751F\u7684 config(AxiosRequestConfig) \u4E2D\uFF0C\u5B58\u5728\u4E24\u4E2A\u5141\u8BB8\u5BF9\u8BF7\u6C42or\u54CD\u5E94\u7684\u6570\u636E\u8FDB\u884C\u8F6C\u5316\u5904\u7406\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">// \`transformRequest\` \u5141\u8BB8\u5728\u5411\u670D\u52A1\u5668\u53D1\u9001\u524D\uFF0C\u4FEE\u6539\u8BF7\u6C42\u6570\u636E</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u5B83\u53EA\u80FD\u7528\u4E8E &#39;PUT&#39;, &#39;POST&#39; \u548C &#39;PATCH&#39; \u8FD9\u51E0\u4E2A\u8BF7\u6C42\u65B9\u6CD5</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u6570\u7EC4\u4E2D\u6700\u540E\u4E00\u4E2A\u51FD\u6570\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C \u4E00\u4E2ABuffer\u5B9E\u4F8B\uFF0CArrayBuffer\uFF0CFormData\uFF0C\u6216 Stream</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u4F60\u53EF\u4EE5\u4FEE\u6539\u8BF7\u6C42\u5934\u3002</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">transformRequest</span><span style="color:var(--shiki-token-punctuation);">:</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (data</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> headers) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u53D1\u9001\u7684 data \u8FDB\u884C\u4EFB\u610F\u8F6C\u6362\u5904\u7406</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> data;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \`transformResponse\` \u5728\u4F20\u9012\u7ED9 then/catch \u524D\uFF0C\u5141\u8BB8\u4FEE\u6539\u54CD\u5E94\u6570\u636E</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">transformResponse</span><span style="color:var(--shiki-token-punctuation);">:</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (data) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u63A5\u6536\u7684 data \u8FDB\u884C\u4EFB\u610F\u8F6C\u6362\u5904\u7406</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> data;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}]</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>\u7531\u4E8E<code>transformRequest\u3001transformResponse</code>\u4E3A Axios \u539F\u751F\u7684API\uFF0C\u6240\u4EE5\u5C3D\u91CF\u4E0D\u53BB\u6539\u53D8\u539F\u6709\u7684 config API</p><blockquote><p>\u{1F35F}\u5728\u9700\u8981\u4E0D\u4FEE\u6539\u539F\u751F Axios config \u60C5\u51B5\u4E0B\uFF0C<strong>\u6269\u5C55\u5355\u4E2A\u8BF7\u6C42\u72EC\u4EAB\u7684\u62E6\u622A\u5668</strong>\u65F6</p><p>\u{1F373}class \u5C01\u88C5\u7684\u65B9\u6CD5\uFF1A<code>request(config: AxiosRequestConfig){}</code>\u53C2\u6570\u4E2D<strong>\u4E0D\u80FD\u518D\u4F7F\u7528\u539F\u751F<code>AxiosRequestConfig</code>\u4F5C\u4E3A\u53C2\u6570\u7684\u6CE8\u89E3</strong></p><p>\u{1FAD5}\u524D\u9762\u63D0\u5230\u8FC7\uFF0Crequest \u4E2D\u7684 config \u53C2\u6570\u4E0E\u5B9E\u4F8B\u5316\u65F6\u4F20\u5165\u7684\u53C2\u6570\u662F\u76F8\u540C\u7684\uFF0C\u6240\u4EE5<strong>\u5728\u8FD9\u91CC\u540C\u6837\u53EF\u4EE5\u4F7F\u7528<code>IHttpRequestConfig</code>\uFF0C\u4F5C\u4E3A request \u7684\u53C2\u6570\u6CE8\u89E3</strong></p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* axios#request(config)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@param</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{*}</span><span style="color:var(--shiki-token-comment);"> config</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">* </span><span style="color:var(--shiki-token-keyword);">@returns</span><span style="color:var(--shiki-token-comment);"> </span><span style="color:var(--shiki-token-function);">{*}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">request</span><span style="color:var(--shiki-color-text);">(config: AxiosRequestConfig) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// ...\u6539\u4E3A AxiosRequestConfig -&gt; IHttpRequestConfig</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">request</span><span style="color:var(--shiki-color-text);">(config: IHttpRequestConfig) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-comment);">// ... \u5728\u6267\u884C\u8BF7\u6C42\u4E4B\u524D\uFF0C\u6267\u884C\u5355\u4E2A\u8BF7\u6C42\u72EC\u4EAB\u7684\u62E6\u622A\u5668(?)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">(config)</span><span style="color:var(--shiki-token-function);">.then</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    	</span><span style="color:var(--shiki-token-comment);">// ... </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    )</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5177\u4F53\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">// Http \u5C01\u88C5\u7684request\u{1FAD5}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">request</span><span style="color:var(--shiki-color-text);">(config: IHttpRequestConfig) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     </span><span style="color:var(--shiki-token-comment);">// \u5B58\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u62E6\u622A\u5668Hooks(\u8BF7\u6C42\u4E4B\u524D)\u{1F340}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.beforeRequestInterceptor) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-comment);">// \u7ACB\u5373\u6267\u884CbeforeRequestInterceptor\u65B9\u6CD5\uFF0C\u4F20\u5165config\u5904\u7406\u8FD4\u56DE\u65B0\u7684\u5904\u7406\u540E\u7684config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         config </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.beforeRequestInterceptor</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-color-text);">.axios</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-function);">.then</span><span style="color:var(--shiki-color-text);">((result) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-comment);">// \u5B58\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u62E6\u622A\u5668Hooks(\u54CD\u5E94\u6210\u529F)\u{1F343}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.responseSuccessInterceptor) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">             </span><span style="color:var(--shiki-token-comment);">// \u7ACB\u5373\u6267\u884CbeforeRequestInterceptor\u65B9\u6CD5\uFF0C\u4F20\u5165config\u5904\u7406\u8FD4\u56DE\u65B0\u7684\u5904\u7406\u540E\u7684config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">             result </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.responseSuccessInterceptor</span><span style="color:var(--shiki-color-text);">(result)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> result</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     })</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-function);">.catch</span><span style="color:var(--shiki-color-text);">((error) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-comment);">// \u5B58\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u62E6\u622A\u5668Hooks(\u54CD\u5E94\u5931\u8D25)\u{1F304}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (</span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-color-text);">?.responseFailInterceptor) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">             </span><span style="color:var(--shiki-token-comment);">// \u7ACB\u5373\u6267\u884CbeforeRequestInterceptor\u65B9\u6CD5\uFF0C\u4F20\u5165config\u5904\u7406\u8FD4\u56DE\u65B0\u7684\u5904\u7406\u540E\u7684config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">             error </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.responseFailInterceptor</span><span style="color:var(--shiki-color-text);">(error)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">         </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> error</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">     })</span></span>
<span class="line"><span style="color:var(--shiki-color-text);"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u6267\u884C request \u65B9\u6CD5\uFF0C\u4F20\u5165\u62E6\u622A\u5668\u5904\u7406\u{1F30F}\uFF0C\u5982\uFF1A</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    url</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;/api/addUser&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    methed</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;POST&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    interceptors</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-function);">beforeRequestInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);">(config) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">// ...\u5904\u7406config\u6570\u636E</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        }</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// ...\u8BF7\u6C42\u9519\u8BEF\u5904\u7406\u4E0D\u62E6\u622A</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-function);">responseSuccessInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);">(result) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> result</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6CE8\u610F\uFF1A\u5F53\u5B58\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u8BF7\u6C42\u62E6\u622A\u5668\u65F6\uFF0C\u5E94\u5F53\u5728\u53D1\u9001\u8BF7\u6C42\u4E4B\u524D<strong>\u7ACB\u5373\u6267\u884C beforeRequestInterceptor \u65B9\u6CD5</strong>\uFF0C\u800C\u4E0D\u662F\u901A\u8FC7\u4F20\u5165\u5230 use() \u56DE\u8C03\uFF0C\u6267\u884C\u8BF7\u6C42\u62E6\u622A\u65B9\u6CD5\u5904\u7406\u5B8C\u4E4B\u540E\u8FD4\u56DE\u4E00\u4E2A\u7ECF\u8FC7\u5904\u7406\u7684 config\uFF0C\u5728\u4F20\u5165\u5230\u8BF7\u6C42\u65B9\u6CD5\u4E2D\uFF0C\u53D1\u9001\u8BF7\u6C42</p><p>\u5176\u5B83\u7684\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u54CD\u5E94\u62E6\u622A\u5668\u4E00\u6837</p></blockquote><h3 id="\u88C5\u4FEE-http-class" tabindex="-1"><a class="header-anchor" href="#\u88C5\u4FEE-http-class" aria-hidden="true">#</a> \u88C5\u4FEE Http class</h3><h4 id="\u8FD4\u56DE\u7ECF\u8FC7" tabindex="-1"><a class="header-anchor" href="#\u8FD4\u56DE\u7ECF\u8FC7" aria-hidden="true">#</a> \u8FD4\u56DE\u7ECF\u8FC7</h4><blockquote><p>\u5728\u54CD\u5E94\u6570\u636E\u65F6\u5019(\u54CD\u5E94\u62E6\u622A\u5668)\uFF0C<strong>Axios \u4E3A\u6570\u636E\u5728\u5916\u5C42\u5305\u88C5\u4E86\u4E00\u5C42\u5BF9\u8C61\uFF0C\u540E\u53F0\u8FD4\u56DE\u7684\u6570\u636E\u5C31\u5B58\u5728\u4E8E result \u7684 data \u4E2D</strong>\uFF0C\u6240\u4EE5\u9700\u8981\u5BF9\u6570\u636E\u518D\u4E00\u6B65\u7684\u5904\u7406\uFF0C\u6252\u5F00\u6700\u5916\u5C42\u7684\u76AE</p><p><strong>\u6CE8\u610F\uFF1AAxios \u5728\u5916\u5C42\u5305\u88C5\u7684\u5BF9\u8C61\u6570\u636E\uFF0C\u5176\u5B9E\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\u662F\u9700\u8981 result \u4E2D\u7684\u4E00\u4E9B\u5C5E\u6027\u6570\u636E\u7684\uFF0C\u5E76\u4E0D\u4EC5\u4EC5\u9700\u8981 data\uFF0C\u6BD4\u5982\u8FD4\u56DE\u683C\u5F0F\u4E3A\u6587\u4EF6\u6570\u636E\u4E2D\uFF0C\u9700\u8981 headers \u4E2D\u7684\u4E00\u4E9B\u6570\u636E\u5BF9\u6587\u4EF6\u8FDB\u884C\u5904\u7406\uFF0C\u547D\u540D\u7B49...</strong></p><p>\u8FD9\u91CC\u7684\u6252\u76AE\u5904\u7406\uFF0C\u903B\u8F91\u5E94\u5F53\u5C5E\u4E8E\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u7684\u4E00\u4E2A\u62E6\u622A\u5668\uFF0C<strong>\u5177\u4F53\u5DE5\u5177\u9700\u8981\u8FDB\u884C\u5904\u7406</strong></p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">// \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u7684\u62E6\u622A-\u54CD\u5E94\u62E6\u622A\u5668</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">this</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">response</span><span style="color:var(--shiki-token-function);">.use</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (response) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u8FD4\u56DE\u4E3A\u6587\u4EF6\u6D41\u65F6,\u76F4\u63A5\u8FD4\u56DE(\u6587\u4EF6\u9700\u8981\u5355\u72EC\u5904\u7406)\u{1FA82}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> ([</span><span style="color:var(--shiki-token-string-expression);">&#39;blob&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;arraybuffer&#39;</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-function);">.includes</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">response</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">request</span><span style="color:var(--shiki-color-text);">.responseType)) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">// if (response.headers[&#39;content-disposition&#39;]) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//     let fileName = response.headers[&#39;content-disposition&#39;].split(&#39;filename=&#39;)[1]</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//     fileName = decodeURI(fileName)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//     return {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//         data: response.data,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//         fileName</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">//     }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-comment);">// }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> response</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u6839\u636E\u4E1A\u52A1\u7801 or \u72B6\u6001\u7801...\u8FDB\u884C\u5224\u65AD</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u6252\u76AE\u{1F6F5}</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">response</span><span style="color:var(--shiki-color-text);">.data</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> (error) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u8D85\u51FA 2xx \u8303\u56F4\u7684\u72B6\u6001\u7801\u90FD\u4F1A\u89E6\u53D1\u8BE5\u51FD\u6570\u3002</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-comment);">// \u5BF9\u54CD\u5E94\u9519\u8BEF\u505A\u70B9\u4EC0\u4E48</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Promise</span><span style="color:var(--shiki-token-function);">.reject</span><span style="color:var(--shiki-color-text);">(error)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="request-\u8FD4\u56DE\u6570\u636E\u7ED3\u6784-dto" tabindex="-1"><a class="header-anchor" href="#request-\u8FD4\u56DE\u6570\u636E\u7ED3\u6784-dto" aria-hidden="true">#</a> request \u8FD4\u56DE\u6570\u636E\u7ED3\u6784(DTO)</h4><p>\u5B9A\u4E49\u8FD4\u56DE\u6570\u636E\u7C7B\u578B\u6CE8\u89E3</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">// \u6700\u7EC8\u6570\u636E\u7C7B\u578B\u6CE8\u89E3</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IDateType</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    [key</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// axios \u8FD4\u56DE\u7684\u6570\u636E\u7C7B\u578B\u6CE8\u89E3\uFF0CIDateType === T</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IDTO</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    code</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    data</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">T</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    message</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    state</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">number</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    [prop</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">string</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u8BF7\u6C42\u65B9\u6CD5\uFF0C\u4F20\u5165\u6CE8\u89E3</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">axios</span><span style="color:var(--shiki-token-function);">.request</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">IDTO</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">IDateType</span><span style="color:var(--shiki-color-text);">&gt;&gt;({</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    url</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;/api/addUser&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    methed</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&#39;POST&#39;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">})</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7531\u4E8E\u5728\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u7684\u54CD\u5E94\u62E6\u622A\u5668\u4E2D\uFF0C\u4FEE\u6539\u4E86\u8FD4\u56DE\u7684\u6570\u636E\u7ED3\u6784<code>return response.data</code>,<strong>\u5230\u8FBE\u65B9\u6CD5\u54CD\u5E94\u62E6\u622A\u5668\u4E2D\u7684\u6570\u636E\u7C7B\u578B\u5DF2\u7ECF\u4E0D\u518D\u662F<code>AxiosResponse</code>\uFF0C\u5BFC\u81F4\u5728\u54CD\u5E94\u6210\u529F\u7684\u62E6\u622A\u5668\u4E2D\u7C7B\u578B\u9519\u8BEF\u65E0\u6CD5\u8D4B\u503C\uFF0C\u4EE5\u53CA.then\u8FD4\u56DE\u7684\u7C7B\u578B\u4E0D\u6B63\u786E\u65E0\u6CD5\u8FD4\u56DE,\u6B63\u786E\u5E94\u8BE5\u4E3A<code>DTO</code>\u7C7B\u578B</strong>\uFF0C\u89E3\u51B3\u65B9\u6848\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:var(--shiki-color-background);"><code><span class="line"><span style="color:var(--shiki-token-comment);">// \u4FEE\u6539 AxiosRequestConfig \u7C7B\u578B\u6CE8\u89E3\uFF0C\u9ED8\u8BA4\u7C7B\u578B\u4E3A\u539F\u6765\u7684 AxiosResponse\uFF0C\u4F20\u9012\u5230\u54CD\u5E94\u6210\u529F\u7684\u62E6\u622A\u4E2D\u8FDB\u884C\u6CDB\u578B\u6CE8\u89E3\uFF0C\u7528\u4E8E\u5728\u65B9\u6CD5\u4E2D\u91CD\u65B0\u4FEE\u6539\u8FD4\u56DE\u7684\u6570\u636E\u7C7B\u578B</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u6700\u7EC8\u7684\u6CDB\u578B\u7C7B\u578B\u6CE8\u89E3\u5230\u8FBE responseSuccessInterceptor \u4E2D</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">interceptorHooks</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);">&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">beforeRequestInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (config</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">requestErrorInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (error</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">responseSuccessInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (result</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">T</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">responseFailInterceptor</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> (error</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">any</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">export</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IinterceptorHooks</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponse</span><span style="color:var(--shiki-color-text);">&gt; </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Partial</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">interceptorHooks</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);">&gt;&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">export</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IHttpRequestConfig</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosResponse</span><span style="color:var(--shiki-color-text);">&gt; </span><span style="color:var(--shiki-token-keyword);">extends</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">AxiosRequestConfig</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    interceptors</span><span style="color:var(--shiki-token-keyword);">?:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">IinterceptorHooks</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u4FEE\u6539 Http class request\u65B9\u6CD5\uFF0C\u901A\u8FC7 \u6CDB\u578B T \u63A5\u53D7\u65B9\u6CD5\u4F20\u8FBE\u8FC7\u6765\u7684 DTO \u7C7B\u578B\u6CE8\u89E3\uFF0C\u4F20\u9012\u5230 IHttpRequestConfig \u4E2D\u4FEE\u6539 responseSuccessInterceptor \u7684\u53C2\u6570\u7C7B\u578B\u6CE8\u89E3\u4EE5\u53CA\u8FD4\u56DE\u503C\u6CE8\u89E3\uFF0C\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u62E6\u622A\u5668\u4E2D\u5C31\u53EF\u4EE5\u63A5\u53D7\u53C2\u6570\uFF0C\u5E76\u4E14\u8FD4\u56DE\u6B63\u786E\u7684 DTO \u7C7B\u578B\u6570\u636E</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// \u7531\u4E8E\u5728\u4E0B\u9762\u7684 this.axios.request() \u65B9\u6CD5\u4E2D\uFF0C\u8FD4\u56DE\u7684\u6570\u636E\u5DF2\u7ECF\u88AB\u4E0A\u4E00\u4E2A\u62E6\u622A\u5668\u6252\u76AE\u4FEE\u6539\u4E86\uFF0C\u8FD4\u56DE\u7684 result \u7C7B\u578B\u6CE8\u89E3\u4E2D\u5B58\u5728\u7C7B\u578B\u4E0D\u6B63\u786E\u60C5\u51B5(\u6B63\u786E\u8FD4\u56DE\u5E94\u8FD4\u56DEresponse.data\u7684\u7C7B\u578B\u6CE8\u89E3)\uFF0C\u5B9E\u9645\u8FD4\u56DE\u4E3A AxiosResponse&lt;any,any&gt;\u7C7B\u578B\u6CE8\u89E3\uFF0C\u5BFC\u81F4\u6570\u636E\u8FD4\u56DE\u5230\u6700\u5916\u5C42\u65B9\u6CD5\u65F6\u7F16\u8F91\u5668\u62A5\u9519(\u6700\u5916\u5C42\u63A5\u53D7 DTO \u7C7B\u578B)\uFF0C\u6240\u4EE5\u9700\u8981\u624B\u52A8\u4FEE\u6539this.axios.request() \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u7684\u7C7B\u578B\u6CE8\u89E3 this.axios.request&lt;any, T&gt;()</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">request</span><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-function);">T</span><span style="color:var(--shiki-color-text);">&gt;(config: IHttpRequestConfig</span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-token-constant);">T</span><span style="color:var(--shiki-token-keyword);">&gt;</span><span style="color:var(--shiki-color-text);">): </span><span style="color:var(--shiki-token-constant);">Promise</span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-token-constant);">T</span><span style="color:var(--shiki-token-keyword);">&gt;</span><span style="color:var(--shiki-color-text);"> {  </span></span>
<span class="line"><span style="color:var(--shiki-color-text);">        return this.axios</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            .request&lt;any</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> T&gt;(config)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            .then((result) =&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-comment);">// \u5B58\u5728\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u81EA\u5B9A\u4E49\u62E6\u622A\u5668Hooks(\u54CD\u5E94\u6210\u529F)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-function);">if</span><span style="color:var(--shiki-color-text);"> (config.interceptors?.responseSuccessInterceptor) {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                    </span><span style="color:var(--shiki-token-comment);">// \u7ACB\u5373\u6267\u884CbeforeRequestInterceptor\u65B9\u6CD5\uFF0C\u4F20\u5165config\u5904\u7406\u8FD4\u56DE\u65B0\u7684\u5904\u7406\u540E\u7684config</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                    result </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">config</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">interceptors</span><span style="color:var(--shiki-token-function);">.responseSuccessInterceptor</span><span style="color:var(--shiki-color-text);">(result)</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                }</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">                return result</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            })</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-function);">.catch</span><span style="color:var(--shiki-color-text);">((error) </span><span style="color:var(--shiki-token-keyword);">=&gt;</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">              </span><span style="color:var(--shiki-token-comment);">// ...</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">            })</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u62E6\u622A\u5668\u6267\u884C\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u62E6\u622A\u5668\u6267\u884C\u987A\u5E8F" aria-hidden="true">#</a> \u62E6\u622A\u5668\u6267\u884C\u987A\u5E8F</h3><blockquote><p>\u7531\u4E8E\u5728 constructor(\u6784\u9020\u51FD\u6570) <strong>\u4EE3\u7801\u987A\u5E8F\uFF1A\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u62E6\u622A\u5668 -&gt; \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u62E6\u622A\u5668 -&gt;...</strong></p><p>\u{1F304}<strong>\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u62E6\u622A\u5668\u4F4D\u4E8E\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u62E6\u622A\u5668\u4E4B\u524D</strong>\uFF0C\u6267\u884C\u987A\u5E8F\u4E3A\uFF1A</p><p><strong><code>\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u54CD\u5E94\u62E6\u622A\u5668 -&gt; \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u54CD\u5E94\u62E6\u622A\u5668</code></strong></p><p>\u53CD\u4E4B\uFF0C\u5219\uFF1A</p><p>\u{1F305}<strong>\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u62E6\u622A\u5668\u4F4D\u4E8E\u4E4B\u524D\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u62E6\u622A\u5668</strong>\uFF0C\u6267\u884C\u987A\u5E8F\u4E3A\uFF1A</p><p><strong><code>\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u54CD\u5E94\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u54CD\u5E94\u62E6\u622A\u5668</code></strong></p><p>\u{1F30F}<strong>\u5355\u4E2A\u65B9\u6CD5\u72EC\u4EAB\u62E6\u622A\u5668(\u5355\u4E2A\u5B9E\u4F8B\u72EC\u4EAB\u62E6\u622A\u5668\u4F4D\u4E8E\u6240\u6709\u5B9E\u4F8B\u5171\u4EAB\u62E6\u622A\u5668\u4E4B\u524D)</strong>\uFF0C\u6267\u884C\u987A\u5E8F\u4E3A\uFF1A</p><p><strong><code>\u5355\u4E2A\u65B9\u6CD5\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u5B9E\u4F8B\u5171\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u72EC\u4EAB\u8BF7\u6C42\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u72EC\u4EAB\u54CD\u5E94\u62E6\u622A\u5668 -&gt; \u5B9E\u4F8B\u5171\u4EAB\u54CD\u5E94\u62E6\u622A\u5668 -&gt; \u5355\u4E2A\u65B9\u6CD5\u54CD\u5E94\u62E6\u622A\u5668</code></strong></p><p>\u8BF7\u6C42\u62E6\u622A\uFF1Aconstructor<strong>\u5148\u6267\u884C\u7684\u4EE3\u7801</strong>(use())\uFF0C\u62E6\u622A\u5668\u91CC\u9762\u7684\u56DE\u8C03hook<strong>\u540E\u88AB\u6267\u884C</strong>\uFF0C\u53CD\u4E4B\uFF0C<strong>\u5148\u88AB\u6267\u884C</strong></p><p>\u54CD\u5E94\u62E6\u622A\uFF1Aconstructor<strong>\u5148\u6267\u884C\u7684\u4EE3\u7801</strong>(use())\uFF0C\u62E6\u622A\u5668\u91CC\u9762\u7684\u56DE\u8C03hook<strong>\u5148\u88AB\u6267\u884C</strong>\uFF0C\u53CD\u4E4B\uFF0C<strong>\u540E\u88AB\u6267\u884C</strong></p><p>\u9700\u8981\u4FEE\u6539\u6267\u884C\u987A\u5E8F\u53EF\u8C03\u6574\u4EE3\u7801\u7684\u6267\u884C\u987A\u5E8F</p></blockquote><h3 id="\u64CD\u4F5C\u573A\u666F\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#\u64CD\u4F5C\u573A\u666F\u63A7\u5236" aria-hidden="true">#</a> \u64CD\u4F5C\u573A\u666F\u63A7\u5236</h3><blockquote><p>\u7531\u4E8E\u5B58\u5728\u4E09\u79CD\u62E6\u622A\u5668\uFF0C\u5B58\u5728\u4E00\u4E9B\u590D\u6742\u7684\u64CD\u4F5C\u573A\u666F\u65F6\uFF0C\u6BD4\u5982\uFF0C\u901A\u8FC7\u7ED9\u6240\u6709\u5B9E\u4F8B\u6216\u8005\u5355\u72EC\u5B9E\u4F8B\u63D0\u524D\u6DFB\u52A0\u4E86\u64CD\u4F5C<code>loading\u3001\u9519\u8BEF\u6355\u83B7...</code>\uFF0C\u4F46\u662F\u73B0\u5728\u9700\u8981\u5728\u67D0\u4E2A\u8BF7\u6C42\u65B9\u6CD5\u4E2D\u4E0D\u8FDB\u884C\u6B64\u64CD\u4F5C\u65F6\uFF0C\u5982\u4F55\u89E3\u51B3\uFF1F</p><p><strong>\u89E3\u51B3\u65B9\u6848\uFF1A\u901A\u8FC7\u7EE7\u7EED\u6269\u5C55\u7279\u5B9A\u7684 IHttpRequestConfig \u7C7B\u578B\u5C5E\u6027\uFF0C\u56E0\u4E3A<code>\u5355\u4E2A\u65B9\u6CD5\u8BF7\u6C42\u62E6\u622A\u5668\u662F\u6700\u5148\u6267\u884C</code>\u7684\uFF0CIHttpRequestConfig \u914D\u7F6E\u9879\uFF0C\u5728<code>\u6240\u6709\u7684\u62E6\u622A\u5668\u4E2D\u662F\u5171\u4EAB\u7684</code>\uFF0C\u5C42\u7EA7\u4F20\u9012\u7684\uFF0C<code>\u5728\u62E6\u622A\u5668\u4E2D\u5224\u65AD\u7279\u5B9A\u7684\u5C5E\u6027\u503C</code>\u5173\u95ED\u4E0D\u9700\u8981\u7684\u64CD\u4F5C</strong></p></blockquote>`,53),i=[l];function t(r,p){return n(),o("div",null,i)}var k=s(e,[["render",t],["__file","Axios\u5C01\u88C5.html.vue"]]);export{k as default};
